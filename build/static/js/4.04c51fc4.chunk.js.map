{"version":3,"sources":["../node_modules/engine.io-client/build/esm/util.js","../node_modules/@socket.io/component-emitter/index.js","../node_modules/engine.io-client/build/esm/globalThis.browser.js","../node_modules/engine.io-client/build/esm/transport.js","../node_modules/engine.io-parser/build/esm/commons.js","../../src/index.ts","../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../node_modules/engine.io-parser/build/esm/index.js","../node_modules/parseqs/index.js","../node_modules/parseuri/index.js","../node_modules/yeast/index.js","../node_modules/has-cors/index.js","../node_modules/engine.io-client/build/esm/transports/websocket.js","../node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","../node_modules/backo2/index.js","../node_modules/eventemitter3/index.js","../node_modules/@mapbox/point-geometry/index.js","../node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","../node_modules/engine.io-client/build/esm/transports/polling.js","../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../node_modules/engine.io-client/build/esm/transports/index.js","../node_modules/engine.io-client/build/esm/socket.js","../node_modules/engine.io-client/build/esm/index.js","../node_modules/socket.io-parser/build/esm/is-binary.js","../node_modules/socket.io-parser/build/esm/binary.js","../node_modules/socket.io-parser/build/esm/index.js","../node_modules/socket.io-client/build/esm/on.js","../node_modules/socket.io-client/build/esm/socket.js","../node_modules/socket.io-client/build/esm/manager.js","../node_modules/socket.io-client/build/esm/index.js","../node_modules/socket.io-client/build/esm/url.js","../node_modules/@mui/material/Card/cardClasses.js","../node_modules/@mui/material/Card/Card.js","../../node_modules/fast-deep-equal/index.js","../../src/google_map_map.js","../../src/marker_dispatcher.js","../../src/utils/omit.js","../../src/utils/shallowEqual.js","../../src/google_map_markers.js","../../src/google_map_markers_prerender.js","../../src/loaders/google_map_loader.js","../../src/lib/geo/wrap.js","../../src/lib/geo/lat_lng.js","../../src/lib/geo/transform.js","../../src/lib/geo/index.js","../../src/utils/raf.js","../../src/utils/log2.js","../../src/utils/pick.js","../../src/utils/isEmpty.js","../../src/utils/isNumber.js","../../src/utils/detect.js","../../src/utils/isPlainObject.js","../../src/utils/passiveEvents.js","../../src/utils/detectElementResize.js","../../src/google_map.js","../../src/google_heatmap.js","../../src/utils/isArraysEqualEps.js"],"names":["pick","obj","attr","reduce","acc","k","hasOwnProperty","NATIVE_SET_TIMEOUT","setTimeout","NATIVE_CLEAR_TIMEOUT","clearTimeout","installTimerFunctions","opts","useNativeTimers","setTimeoutFn","bind","globalThis","clearTimeoutFn","Emitter","key","prototype","mixin","exports","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","length","cb","callbacks","i","splice","emit","args","Array","len","slice","emitReserved","listeners","hasListeners","self","window","Function","Transport","writable","query","readyState","socket","msg","desc","err","Error","type","description","doOpen","doClose","onClose","packets","write","data","packet","decodePacket","binaryType","onPacket","PACKET_TYPES","Object","create","PACKET_TYPES_REVERSE","keys","forEach","ERROR_PACKET","withNativeBlob","Blob","toString","call","withNativeArrayBuffer","ArrayBuffer","encodeBlobAsBase64","callback","fileReader","FileReader","onload","content","result","split","readAsDataURL","encodePacket","supportsBinary","isView","buffer","chars","lookup","Uint8Array","charCodeAt","decodeBase64Packet","decoded","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","p","arraybuffer","bytes","decode","mapBinary","encodedPacket","charAt","substring","SEPARATOR","String","fromCharCode","encodePayload","encodedPackets","count","join","decodePayload","encodedPayload","decodedPacket","protocol","encode","str","encodeURIComponent","qs","qry","pairs","l","pair","decodeURIComponent","re","parts","module","src","b","indexOf","e","replace","m","exec","uri","source","host","authority","ipv6uri","pathNames","path","regx","names","substr","queryKey","$0","$1","$2","prev","alphabet","map","seed","num","encoded","Math","floor","yeast","now","Date","XMLHttpRequest","isReactNative","navigator","product","toLowerCase","WS","forceBase64","check","protocols","extraHeaders","headers","ws","usingBrowserWebSocket","WebSocket","defaultBinaryType","addEventListeners","onopen","autoUnref","_socket","unref","onOpen","onclose","onmessage","ev","onData","onerror","onError","lastPacket","options","compress","perMessageDeflate","Buffer","byteLength","threshold","send","nextTick","close","schema","secure","port","Number","timestampRequests","timestampParam","b64","encodedQuery","parseqs","hostname","name","Promise","resolve","then","MozWebSocket","Backoff","ms","min","max","factor","jitter","attempts","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","has","prefix","Events","EE","context","addListener","emitter","TypeError","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","__proto__","eventNames","events","getOwnPropertySymbols","concat","handlers","ee","listenerCount","a1","a2","a3","a4","a5","undefined","j","prefixed","Point","x","y","clone","add","_add","sub","_sub","multByPoint","_multByPoint","divByPoint","_divByPoint","mult","_mult","div","_div","rotate","a","_rotate","rotateAround","_rotateAround","matMult","_matMult","unit","_unit","perp","_perp","round","_round","mag","sqrt","equals","other","dist","distSqr","dx","dy","angle","atan2","angleTo","angleWith","angleWithSep","cos","sin","convert","isArray","xdomain","hasCORS","Polling","polling","poll","onPause","pause","total","doPoll","doWrite","sid","empty","hasXHR2","responseType","XHR","location","isSSL","xd","xs","assign","Request","req","request","method","pollXhr","async","xscheme","xhr","open","setDisableHeaderCheck","setRequestHeader","withCredentials","requestTimeout","timeout","onreadystatechange","status","onLoad","document","index","requestsCount","requests","cleanup","onSuccess","fromError","abort","responseText","attachEvent","unloadHandler","terminationEvent","transports","websocket","Socket","parseuri","writeBuffer","prevBufferLen","agent","upgrade","rememberUpgrade","rejectUnauthorized","transportOptions","closeOnBeforeunload","id","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","transport","offlineEventListener","o","EIO","priorWebsocketSuccess","createTransport","shift","setTransport","onDrain","failed","onTransportOpen","upgrading","flush","freezeTransport","error","onTransportClose","onupgrade","to","probe","onHandshake","JSON","parse","resetPingTimeout","sendPacket","code","filterUpgrades","cleanupAndClose","waitForUpgrade","reason","filteredUpgrades","withNativeFile","File","isBinary","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","newData","reconstructPacket","_reconstructPacket","PacketType","Encoder","EVENT","ACK","encodeAsString","BINARY_EVENT","BINARY_ACK","encodeAsBinary","nsp","stringify","deconstruction","unshift","Decoder","decodeString","reconstructor","BinaryReconstructor","takeBinaryData","start","buf","next","c","payload","tryParse","isPayloadValid","finishedReconstruction","CONNECT","DISCONNECT","CONNECT_ERROR","reconPack","binData","RESERVED_EVENTS","freeze","connect","connect_error","disconnect","disconnecting","newListener","io","connected","disconnected","receiveBuffer","sendBuffer","ids","acks","flags","auth","_autoConnect","subs","onpacket","subEvents","_readyState","ack","pop","_registerAckCallback","isTransportWritable","engine","discardPacket","volatile","timer","_packet","onconnect","onevent","onack","ondisconnect","destroy","message","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","Manager","_a","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","decoder","autoConnect","v","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","_reconnecting","reconnect","Engine","skipReconnect","openSubDestroy","errorSub","maybeReconnectOnOpen","onping","ondata","ondecoded","active","_close","delay","onreconnect","attempt","cache","parsed","loc","test","href","url","sameNamespace","forceNew","multiplex","getCardUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","CardRoot","styled","Paper","overridesResolver","props","styles","root","overflow","Card","React","inProps","ref","useThemeProps","className","raised","_objectWithoutPropertiesLoose","ownerState","_extends","classes","composeClasses","useUtilityClasses","_jsx","clsx","elevation","LoaderStatus","fastDeepEqual","equal","constructor","RegExp","valueOf","DEFAULT_ID","Loader","apiKey","channel","client","libraries","language","region","version","mapIds","nonce","retries","instance","isEqual","errors","FAILURE","done","SUCCESS","loading","LOADING","INITIALIZED","CALLBACK","script","getElementById","remove","loadPromise","reject","loadCallback","google","execute","createUrl","createElement","loadErrorCallback","defer","head","appendChild","deleteScript","onerrorEvent","console","log","setScript","__googleMapsCallback","resetIfRetryingFailed","maps","warn","setCallback","style","width","height","left","top","margin","padding","position","GoogleMapMap","shouldComponentUpdate","n","render","registerChild","Component","MarkerDispatcher","gmapInstance","_this","getChildren","children","getMousePosition","mouse_","getUpdateCounter","updateCounter_","dispose","omit","rest","is","shallowEqual","objA","objB","keysA","keysB","mainStyle","backgroundColor","GoogleMapMarkers","_getState","dispatcher","updateCounter","_onChangeHandler","dimensionsCache_","prevChildCount","state","setState","_onMouseChangeHandler","_onChildClick","onChildClick","hoverChildProps_","hoverKey_","_onChildMouseDown","onChildMouseDown","_onChildMouseEnter","hoverKey","childProps","onChildMouseEnter","_onChildMouseLeave","onChildMouseLeave","_onMouseAllow","value","allowMouse_","_onMouseChangeHandlerRaf","mp","distances","hoverDistance","getHoverDistance","Children","child","childIndex","latLng","lat","lng","childKey","distanceToMouse","sort","_getDimensions","componentDidMount","nextProps","nextState","experimental","componentWillUnmount","mainElementStyle","markers","cloneElement","$geoService","_this2","geoService","$onMouseAllow","$prerender","prerender","pt","insideMapPanes","fromLatLngToDivPixel","fromLatLngToCenterPixel","stylePtPos","seLatLng","seLat","seLng","sePt","containerPt","fromLatLngToContainerPixel","$markerHolderClassName","$hover","$getDimensions","$dimensionKey","propTypes","PropTypes","any","func","bool","defaultProps","loader_","loadPromise_","resolveCustomPromise_","_customPromise","bootstrapURLKeys","heatmapLibrary","includes","restKeys","load","wrap","d","LatLng","isNaN","Transform","tileSize","minZoom","maxZoom","_minZoom","_maxZoom","latRange","zoom","center","zoomScale","scaleZoom","scale","LN2","project","latlng","worldSize","lngX","latY","unproject","point","yLat","xLng","lon","PI","tan","atan","exp","locationPoint","centerPoint","pointLocation","p2","get","set","bearing","_zoom","zoomV","tileZoom","zoomFraction","Geo","hasSize_","hasView_","transform_","setView","t","setViewSize","setMapCanvasProjection","mapCanvasProjection","maps_","mapCanvasProjection_","canProject","hasSize","ptLatLng","fromContainerPixelToLatLng","ptXY","ptxy","ptRes","getWidth","getHeight","getZoom","getCenter","getBounds","margins","roundFactor","bndT","bndR","bndB","bndL","topLeftCorner","bottomRightCorner","res","r","raf","requestAnimationFrame","nativeRaf","webkitRequestAnimationFrame","mozRequestAnimationFrame","log2","isEmpty","val","objectToString","isNumber","detectBrowserResult_","detectBrowser","isExplorer","userAgent","isFirefox","isOpera","isChrome","isSafari","fnToString","isPlainObject","proto","getPrototypeOf","addPassiveEventListener","element","eventName","capture","passiveSupported","defineProperty","passive","_window","canUseDOM","cancel","stylesCreated","requestFrame","cancelFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","resetTriggers","triggers","__resizeTriggers__","expand","firstElementChild","contract","lastElementChild","expandChild","scrollLeft","scrollWidth","scrollTop","scrollHeight","offsetWidth","offsetHeight","scrollListener","__resizeRAF__","__resizeLast__","__resizeListeners__","animation","keyframeprefix","animationstartevent","domPrefixes","startEvents","elm","animationName","animationstring","animationKeyframes","animationStyle","IS_REACT_16","ReactDOM","createPortal","unstable_renderSubtreeIntoContainer","latLng2Obj","_checkMinZoom","GoogleMap","_getMinZoom","geoService_","tilesPerWidth","ceil","tilesPerHeight","maxTilesPerDim","_computeMinZoom","_mapDomResizeCallback","resetSizeOnIdle_","originalCenter","defaultCenter","currentCenter","map_","trigger","setCenter","resetBoundsOnResize","_setLayers","layerTypes","layerType","layers_","setMap","_renderPortal","_getHoverDistance","markersDispatcher_","_initMap","initialized_","propsCenter","defaultZoom","_onBoundsChanged","googleMapLoader","mounted_","centerLatLng","propsOptions","heatmap","positions","visualization","HeatmapLayer","weight","option","mapPlainObjects","draggableOptions","draggable","minZoom_","preMapOptions","overviewMapControl","streetViewControl","rotateControl","mapTypeControl","featureType","elementType","stylers","visibility","defaultDraggableOption_","mapOptions","Map","findDOMNode","googleMapDom_","versionMatch","match","mapsVersion","this_","overlay","OverlayView","onAdd","K_MAX_WIDTH","screen","K_MAX_HEIGHT","overlayViewDivStyle","property","getPanes","overlayMouseTarget","getProjection","onRemove","renderedOverlay","unmountComponentAtNode","draw","debounced","googleApiLoadedCalled_","_onGoogleApiLoaded","_onChildMouseMove","fireMouseEventOnIdle_","overlay_","onTilesLoaded","_onTilesLoaded","zoomAnimationInProgress_","_onZoomAnimationStart","getTime","zoomControlClickTime_","_setViewSize","currMinZoom","setOptions","_onZoomAnimationEnd","dragTime_","mouseInMap_","_onDrag","idleListener","_onDragEnd","_onMapTypeIdChange","getMapTypeId","onGoogleApiLoaded","onDrag","onDragEnd","onMapTypeIdChange","onZoomAnimationStart","onZoomAnimationEnd","childMouseDownArgs_","_onChildMouseUp","onChildMouseUp","childMouseUpTime_","onChildMouseMove","fullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement","innerWidth","innerHeight","mapDom","clientWidth","clientHeight","_onWindowResize","_onMapMouseMove","currTime","mouseMoveTime_","boundingRect_","currentTarget","getBoundingClientRect","mousePosX","clientX","mousePosY","clientY","_onClick","onClick","_onMapClick","_onMapMouseDownNative","_onMapMouseDown","_onMapMouseDownCapture","_onKeyDownCapture","_isCenterDefined","callExtBoundsChange","gmC","onChange","onBoundsChange","bounds","arrayA","arrayB","eps","abs","prevBounds_","marginBounds","centerIsObject_","nw","se","sw","ne","size","_registerChild","parentNode","tempParentDiv","getComputedStyle","css","getElementsByTagName","styleSheet","cssText","createTextNode","innerHTML","componentDidUpdate","prevProps","_this3","prevCenter","panTo","setZoom","layerKey","setData","detachEvent","removeChild","shouldUnregisterMapOnUnmount","scrollwheel","clearInstanceListeners","mapMarkerPrerender","GoogleMapMarkersPrerender","onMouseMove","onMouseDownCapture","string","oneOfType","array","shape","number","yesIWantToUseGoogleMapApiInternals","arrayOf","mousePos"],"mappings":"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","file":"static/js/4.04c51fc4.chunk.js","sourcesContent":["import globalThis from \"./globalThis.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = clearTimeout.bind(globalThis);\n    }\n}\n","\n/**\n * Expose `Emitter`.\n */\n\nexports.Emitter = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export default (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} options.\n     * @api private\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.readyState = \"\";\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} str\n     * @return {Transport} for chaining\n     * @api protected\n     */\n    onError(msg, desc) {\n        const err = new Error(msg);\n        // @ts-ignore\n        err.type = \"TransportError\";\n        // @ts-ignore\n        err.description = desc;\n        super.emit(\"error\", err);\n        return this;\n    }\n    /**\n     * Opens the transport.\n     *\n     * @api public\n     */\n    open() {\n        if (\"closed\" === this.readyState || \"\" === this.readyState) {\n            this.readyState = \"opening\";\n            this.doOpen();\n        }\n        return this;\n    }\n    /**\n     * Closes the transport.\n     *\n     * @api public\n     */\n    close() {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     * @api public\n     */\n    send(packets) {\n        if (\"open\" === this.readyState) {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @api protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emit(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @api protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @api protected\n     */\n    onPacket(packet) {\n        super.emit(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @api protected\n     */\n    onClose() {\n        this.readyState = \"closed\";\n        super.emit(\"close\");\n    }\n}\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n",null,"import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + content);\n    };\n    return fileReader.readAsDataURL(data);\n};\nexport default encodePacket;\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE } from \"./commons.js\";\nimport { decode } from \"@socket.io/base64-arraybuffer\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType)\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1)\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type]\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            return data instanceof ArrayBuffer ? new Blob([data]) : data;\n        case \"arraybuffer\":\n        default:\n            return data; // assuming the data is already an ArrayBuffer\n    }\n};\nexport default decodePacket;\n","import encodePacket from \"./encodePacket.js\";\nimport decodePacket from \"./decodePacket.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload };\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","import { Transport } from \"../transport.js\";\nimport parseqs from \"parseqs\";\nimport yeast from \"yeast\";\nimport { pick } from \"../util.js\";\nimport { defaultBinaryType, nextTick, usingBrowserWebSocket, WebSocket } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class WS extends Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @api {Object} connection options\n     * @api public\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Transport name.\n     *\n     * @api public\n     */\n    get name() {\n        return \"websocket\";\n    }\n    /**\n     * Opens socket.\n     *\n     * @api private\n     */\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new WebSocket(uri, protocols)\n                        : new WebSocket(uri)\n                    : new WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emit(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @api private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = this.onClose.bind(this);\n        this.ws.onmessage = ev => this.onData(ev.data);\n        this.ws.onerror = e => this.onError(\"websocket error\", e);\n    }\n    /**\n     * Writes data to socket.\n     *\n     * @param {Array} array of packets.\n     * @api private\n     */\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, data => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emit(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    /**\n     * Closes socket.\n     *\n     * @api private\n     */\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        let port = \"\";\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"wss\" === schema && Number(this.opts.port) !== 443) ||\n                (\"ws\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        const encodedQuery = parseqs.encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @api public\n     */\n    check() {\n        return (!!WebSocket &&\n            !(\"__initialize\" in WebSocket && this.name === WS.prototype.name));\n    }\n}\n","import globalThis from \"../globalThis.js\";\nexport const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return cb => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport const usingBrowserWebSocket = true;\nexport const defaultBinaryType = \"arraybuffer\";\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\n\nmodule.exports = Point;\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n\n    /**\n     * Clone this point, returning a new point that can be modified\n     * without affecting the old one.\n     * @return {Point} the clone\n     */\n    clone: function() { return new Point(this.x, this.y); },\n\n    /**\n     * Add this point's x & y coordinates to another point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    add:     function(p) { return this.clone()._add(p); },\n\n    /**\n     * Subtract this point's x & y coordinates to from point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    sub:     function(p) { return this.clone()._sub(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    multByPoint:    function(p) { return this.clone()._multByPoint(p); },\n\n    /**\n     * Divide this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    divByPoint:     function(p) { return this.clone()._divByPoint(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    mult:    function(k) { return this.clone()._mult(k); },\n\n    /**\n     * Divide this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    div:     function(k) { return this.clone()._div(k); },\n\n    /**\n     * Rotate this point around the 0, 0 origin by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @return {Point} output point\n     */\n    rotate:  function(a) { return this.clone()._rotate(a); },\n\n    /**\n     * Rotate this point around p point by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @param {Point} p Point to rotate around\n     * @return {Point} output point\n     */\n    rotateAround:  function(a,p) { return this.clone()._rotateAround(a,p); },\n\n    /**\n     * Multiply this point by a 4x1 transformation matrix\n     * @param {Array<Number>} m transformation matrix\n     * @return {Point} output point\n     */\n    matMult: function(m) { return this.clone()._matMult(m); },\n\n    /**\n     * Calculate this point but as a unit vector from 0, 0, meaning\n     * that the distance from the resulting point to the 0, 0\n     * coordinate will be equal to 1 and the angle from the resulting\n     * point to the 0, 0 coordinate will be the same as before.\n     * @return {Point} unit vector point\n     */\n    unit:    function() { return this.clone()._unit(); },\n\n    /**\n     * Compute a perpendicular point, where the new y coordinate\n     * is the old x coordinate and the new x coordinate is the old y\n     * coordinate multiplied by -1\n     * @return {Point} perpendicular point\n     */\n    perp:    function() { return this.clone()._perp(); },\n\n    /**\n     * Return a version of this point with the x & y coordinates\n     * rounded to integers.\n     * @return {Point} rounded point\n     */\n    round:   function() { return this.clone()._round(); },\n\n    /**\n     * Return the magitude of this point: this is the Euclidean\n     * distance from the 0, 0 coordinate to this point's x and y\n     * coordinates.\n     * @return {Number} magnitude\n     */\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    /**\n     * Judge whether this point is equal to another point, returning\n     * true or false.\n     * @param {Point} other the other point\n     * @return {boolean} whether the points are equal\n     */\n    equals: function(other) {\n        return this.x === other.x &&\n               this.y === other.y;\n    },\n\n    /**\n     * Calculate the distance from this point to another point\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    /**\n     * Calculate the distance from this point to another point,\n     * without the square root step. Useful if you're comparing\n     * relative distances.\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    /**\n     * Get the angle from the 0, 0 coordinate to this point, in radians\n     * coordinates.\n     * @return {Number} angle\n     */\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    /**\n     * Get the angle from this point to another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    /**\n     * Get the angle between this point and another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    /*\n     * Find the angle of the two vectors, solving the formula for\n     * the cross product a x b = |a||b|sin(θ) for θ.\n     * @param {Number} x the x-coordinate\n     * @param {Number} y the y-coordinate\n     * @return {Number} the angle in radians\n     */\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _multByPoint: function(p) {\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    },\n\n    _divByPoint: function(p) {\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _rotateAround: function(angle, p) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n            y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<Number>|Point|*} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n","// browser shim for xmlhttprequest module\nimport hasCORS from \"has-cors\";\nimport globalThis from \"../globalThis.js\";\nexport default function (opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport yeast from \"yeast\";\nimport parseqs from \"parseqs\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this.polling = false;\n    }\n    /**\n     * Transport name.\n     */\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @api private\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} callback upon buffers are flushed and transport is paused\n     * @api private\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @api public\n     */\n    poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emit(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @api private\n     */\n    onData(data) {\n        const callback = packet => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose();\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emit(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @api private\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} data packets\n     * @param {Function} drain callback\n     * @api private\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, data => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emit(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        let port = \"\";\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"https\" === schema && Number(this.opts.port) !== 443) ||\n                (\"http\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        const encodedQuery = parseqs.encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n}\n","/* global attachEvent */\nimport XMLHttpRequest from \"./xmlhttprequest.js\";\nimport globalThis from \"../globalThis.js\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { Polling } from \"./polling.js\";\n/**\n * Empty function\n */\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new XMLHttpRequest({\n        xdomain: false\n    });\n    return null != xhr.responseType;\n})();\nexport class XHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @api public\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n            this.xs = opts.secure !== isSSL;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @api private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @api private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", err => {\n            this.onError(\"xhr post error\", err);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @api private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", err => {\n            this.onError(\"xhr poll error\", err);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @api public\n     */\n    constructor(uri, opts) {\n        super();\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.async = false !== opts.async;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @api private\n     */\n    create() {\n        const opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        opts.xscheme = !!this.opts.xs;\n        const xhr = (this.xhr = new XMLHttpRequest(opts));\n        try {\n            xhr.open(this.method, this.uri, this.async);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon successful response.\n     *\n     * @api private\n     */\n    onSuccess() {\n        this.emit(\"success\");\n        this.cleanup();\n    }\n    /**\n     * Called if we have data.\n     *\n     * @api private\n     */\n    onData(data) {\n        this.emit(\"data\", data);\n        this.onSuccess();\n    }\n    /**\n     * Called upon error.\n     *\n     * @api private\n     */\n    onError(err) {\n        this.emit(\"error\", err);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @api private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @api private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.onData(data);\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @api public\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","import { XHR } from \"./polling-xhr.js\";\nimport { WS } from \"./websocket.js\";\nexport const transports = {\n    websocket: WS,\n    polling: XHR\n};\n","import { transports } from \"./transports/index.js\";\nimport { installTimerFunctions } from \"./util.js\";\nimport parseqs from \"parseqs\";\nimport parseuri from \"parseuri\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nexport class Socket extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri or options\n     * @param {Object} opts - options\n     * @api public\n     */\n    constructor(uri, opts = {}) {\n        super();\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = parseuri(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parseuri(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\"polling\", \"websocket\"];\n        this.readyState = \"\";\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024\n            },\n            transportOptions: {},\n            closeOnBeforeunload: true\n        }, opts);\n        this.opts.path = this.opts.path.replace(/\\/$/, \"\") + \"/\";\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = parseqs.decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                addEventListener(\"beforeunload\", () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                }, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\");\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} transport name\n     * @return {Transport}\n     * @api private\n     */\n    createTransport(name) {\n        const query = clone(this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts.transportOptions[name], this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port\n        });\n        return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @api private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @api private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", () => {\n            this.onClose(\"transport close\");\n        });\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} transport name\n     * @api private\n     */\n    probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", msg => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = err => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        transport.open();\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @api private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState &&\n            this.opts.upgrade &&\n            this.transport.pause) {\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @api private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.resetPingTimeout();\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @api private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @api private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @api private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @api private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            this.transport.send(this.writeBuffer);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = this.writeBuffer.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} message.\n     * @param {Function} callback function.\n     * @param {Object} options.\n     * @return {Socket} for chaining.\n     * @api public\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @api private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     *\n     * @api public\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @api private\n     */\n    onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @api private\n     */\n    onClose(reason, desc) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, desc);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} server upgrades\n     * @api private\n     *\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nSocket.protocol = protocol;\nfunction clone(obj) {\n    const o = {};\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            o[i] = obj[i];\n        }\n    }\n    return o;\n}\n","import { Socket } from \"./socket.js\";\nexport { Socket };\nexport const protocol = Socket.protocol;\nexport { Transport } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nexport { installTimerFunctions } from \"./util.js\";\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                obj.type =\n                    obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK;\n                return this.encodeAsBinary(obj);\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    constructor() {\n        super();\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            packet = this.decodeString(obj);\n            if (packet.type === PacketType.BINARY_EVENT ||\n                packet.type === PacketType.BINARY_ACK) {\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return typeof payload === \"object\";\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || typeof payload === \"object\";\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return Array.isArray(payload) && payload.length > 0;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n        }\n    }\n}\nfunction tryParse(str) {\n    try {\n        return JSON.parse(str);\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     *\n     * @public\n     */\n    constructor(io, nsp, opts) {\n        super();\n        this.connected = false;\n        this.disconnected = true;\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @public\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for connect()\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * @return self\n     * @public\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @return self\n     * @public\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n        }\n        else if (this.connected) {\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        const timeout = this.flags.timeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        this.acks[id] = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, [null, ...args]);\n        };\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this.packet({ type: PacketType.CONNECT, data });\n            });\n        }\n        else {\n            this.packet({ type: PacketType.CONNECT, data: this.auth });\n        }\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @private\n     */\n    onclose(reason) {\n        this.connected = false;\n        this.disconnected = true;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    const id = packet.data.sid;\n                    this.onconnect(id);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n                this.onack(packet);\n                break;\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id) {\n        this.id = id;\n        this.connected = true;\n        this.disconnected = false;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => this.packet(packet));\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually.\n     *\n     * @return self\n     * @public\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for disconnect()\n     *\n     * @return self\n     * @public\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     * @public\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @returns self\n     * @public\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * ```\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     * ```\n     *\n     * @returns self\n     * @public\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     * @public\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     * @public\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     * @public\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n}\n","import { Socket as Engine, installTimerFunctions, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport Backoff from \"backo2\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `error`\n        const errorSub = on(socket, \"error\", (err) => {\n            self.cleanup();\n            self._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            if (timeout === 0) {\n                openSubDestroy(); // prevents a race condition with the 'open' event\n            }\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                socket.close();\n                // @ts-ignore\n                socket.emit(\"error\", new Error(\"timeout\"));\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        this.decoder.add(data);\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        this.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\n","import parseuri from \"parseuri\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parseuri(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getCardUtilityClass(slot) {\n  return generateUtilityClass('MuiCard', slot);\n}\nconst cardClasses = generateUtilityClasses('MuiCard', ['root']);\nexport default cardClasses;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"raised\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport Paper from '../Paper';\nimport { getCardUtilityClass } from './cardClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getCardUtilityClass, classes);\n};\n\nconst CardRoot = styled(Paper, {\n  name: 'MuiCard',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(() => {\n  return {\n    overflow: 'hidden'\n  };\n});\nconst Card = /*#__PURE__*/React.forwardRef(function Card(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiCard'\n  });\n\n  const {\n    className,\n    raised = false\n  } = props,\n        other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  const ownerState = _extends({}, props, {\n    raised\n  });\n\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardRoot, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : undefined,\n    ref: ref,\n    ownerState: ownerState\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Card.propTypes\n/* remove-proptypes */\n= {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the card will use raised styling.\n   * @default false\n   */\n  raised: chainPropTypes(PropTypes.bool, props => {\n    if (props.raised && props.variant === 'outlined') {\n      return new Error('MUI: Combining `raised={true}` with `variant=\"outlined\"` has no effect.');\n    }\n\n    return null;\n  }),\n\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default Card;","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import React, { Component } from 'react';\n\nconst style = {\n  width: '100%',\n  height: '100%',\n  left: 0,\n  top: 0,\n  margin: 0,\n  padding: 0,\n  position: 'absolute',\n};\n\nexport default class GoogleMapMap extends Component {\n  shouldComponentUpdate() {\n    return false; // disable react on this div\n  }\n\n  render() {\n    const { registerChild } = this.props;\n    return <div ref={registerChild} style={style} />;\n  }\n}\n","import EventEmitter from 'eventemitter3';\n\nexport default class MarkerDispatcher extends EventEmitter {\n  constructor(gmapInstance) {\n    super();\n    this.gmapInstance = gmapInstance;\n  }\n\n  getChildren() {\n    return this.gmapInstance.props.children;\n  }\n\n  getMousePosition() {\n    return this.gmapInstance.mouse_;\n  }\n\n  getUpdateCounter() {\n    return this.gmapInstance.updateCounter_;\n  }\n\n  dispose() {\n    this.gmapInstance = null;\n    this.removeAllListeners();\n  }\n}\n","// https://github.com/acdlite/recompose/blob/master/src/packages/recompose/utils/omit.js\nconst omit = (obj, keys) => {\n  const { ...rest } = obj;\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    if (key in rest) {\n      delete rest[key];\n    }\n  }\n  return rest;\n};\n\nexport default omit;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @providesModule shallowEqual\n * @typechecks\n * @flow\n */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x, y) {\n  // SameValue algorithm\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    // Added the nonzero y check to make Flow happy, but it is redundant\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  }\n  // Step 6.a: NaN == NaN\n  // eslint-disable-next-line no-self-compare\n  return x !== x && y !== y;\n}\n\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * Returns true when the values of all keys are strictly equal.\n */\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (\n    typeof objA !== 'object' ||\n    objA === null ||\n    typeof objB !== 'object' ||\n    objB === null\n  ) {\n    return false;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  for (let i = 0; i < keysA.length; i++) {\n    if (\n      !hasOwnProperty.call(objB, keysA[i]) ||\n      !is(objA[keysA[i]], objB[keysA[i]])\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default shallowEqual;\n/* src: https://github.com/facebook/fbjs/blob/master/packages/fbjs/src/core/shallowEqual.js */\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// utils\nimport omit from './utils/omit';\nimport shallowEqual from './utils/shallowEqual';\n\nconst mainStyle = {\n  width: '100%',\n  height: '100%',\n  left: 0,\n  top: 0,\n  margin: 0,\n  padding: 0,\n  position: 'absolute',\n};\n\nconst style = {\n  width: 0,\n  height: 0,\n  left: 0,\n  top: 0,\n  backgroundColor: 'transparent',\n  position: 'absolute',\n};\n\nexport default class GoogleMapMarkers extends Component {\n  /* eslint-disable react/forbid-prop-types */\n  static propTypes = {\n    geoService: PropTypes.any,\n    style: PropTypes.any,\n    distanceToMouse: PropTypes.func,\n    dispatcher: PropTypes.any,\n    onChildClick: PropTypes.func,\n    onChildMouseDown: PropTypes.func,\n    onChildMouseLeave: PropTypes.func,\n    onChildMouseEnter: PropTypes.func,\n    getHoverDistance: PropTypes.func,\n    insideMapPanes: PropTypes.bool,\n    prerender: PropTypes.bool,\n  };\n  /* eslint-enable react/forbid-prop-types */\n\n  static defaultProps = {\n    insideMapPanes: false,\n    prerender: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.dimensionsCache_ = {};\n    this.hoverKey_ = null;\n    this.hoverChildProps_ = null;\n    this.allowMouse_ = true;\n\n    this.state = { ...this._getState(), hoverKey: null };\n  }\n\n  componentDidMount() {\n    this.props.dispatcher.on('kON_CHANGE', this._onChangeHandler);\n    this.props.dispatcher.on(\n      'kON_MOUSE_POSITION_CHANGE',\n      this._onMouseChangeHandler\n    );\n    this.props.dispatcher.on('kON_CLICK', this._onChildClick);\n    this.props.dispatcher.on('kON_MDOWN', this._onChildMouseDown);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.experimental === true) {\n      return (\n        !shallowEqual(this.props, nextProps) ||\n        !shallowEqual(\n          omit(this.state, ['hoverKey']),\n          omit(nextState, ['hoverKey'])\n        )\n      );\n    }\n\n    return (\n      !shallowEqual(this.props, nextProps) ||\n      !shallowEqual(this.state, nextState)\n    );\n  }\n\n  componentWillUnmount() {\n    this.props.dispatcher.removeListener('kON_CHANGE', this._onChangeHandler);\n    this.props.dispatcher.removeListener(\n      'kON_MOUSE_POSITION_CHANGE',\n      this._onMouseChangeHandler\n    );\n    this.props.dispatcher.removeListener('kON_CLICK', this._onChildClick);\n    this.props.dispatcher.removeListener('kON_MDOWN', this._onChildMouseDown);\n\n    this.dimensionsCache_ = null;\n  }\n\n  _getState = () => ({\n    children: this.props.dispatcher.getChildren(),\n    updateCounter: this.props.dispatcher.getUpdateCounter(),\n  });\n\n  _onChangeHandler = () => {\n    if (!this.dimensionsCache_) {\n      return;\n    }\n\n    const prevChildCount = (this.state.children || []).length;\n    const state = this._getState();\n\n    this.setState(\n      state,\n      () =>\n        (state.children || []).length !== prevChildCount &&\n        this._onMouseChangeHandler()\n    );\n  };\n\n  _onChildClick = () => {\n    if (this.props.onChildClick) {\n      if (this.hoverChildProps_) {\n        const hoverKey = this.hoverKey_;\n        const childProps = this.hoverChildProps_;\n        // click works only on hovered item\n        this.props.onChildClick(hoverKey, childProps);\n      }\n    }\n  };\n\n  _onChildMouseDown = () => {\n    if (this.props.onChildMouseDown) {\n      if (this.hoverChildProps_) {\n        const hoverKey = this.hoverKey_;\n        const childProps = this.hoverChildProps_;\n        // works only on hovered item\n        this.props.onChildMouseDown(hoverKey, childProps);\n      }\n    }\n  };\n\n  _onChildMouseEnter = (hoverKey, childProps) => {\n    if (!this.dimensionsCache_) {\n      return;\n    }\n\n    if (this.props.onChildMouseEnter) {\n      this.props.onChildMouseEnter(hoverKey, childProps);\n    }\n\n    this.hoverChildProps_ = childProps;\n    this.hoverKey_ = hoverKey;\n    this.setState({ hoverKey });\n  };\n\n  _onChildMouseLeave = () => {\n    if (!this.dimensionsCache_) {\n      return;\n    }\n\n    const hoverKey = this.hoverKey_;\n    const childProps = this.hoverChildProps_;\n\n    if (hoverKey !== undefined && hoverKey !== null) {\n      if (this.props.onChildMouseLeave) {\n        this.props.onChildMouseLeave(hoverKey, childProps);\n      }\n\n      this.hoverKey_ = null;\n      this.hoverChildProps_ = null;\n      this.setState({ hoverKey: null });\n    }\n  };\n\n  _onMouseAllow = (value) => {\n    if (!value) {\n      this._onChildMouseLeave();\n    }\n\n    this.allowMouse_ = value;\n  };\n\n  _onMouseChangeHandler = () => {\n    if (this.allowMouse_) {\n      this._onMouseChangeHandlerRaf();\n    }\n  };\n\n  _onMouseChangeHandlerRaf = () => {\n    if (!this.dimensionsCache_) {\n      return;\n    }\n\n    const mp = this.props.dispatcher.getMousePosition();\n\n    if (mp) {\n      const distances = [];\n      const hoverDistance = this.props.getHoverDistance();\n\n      React.Children.forEach(this.state.children, (child, childIndex) => {\n        if (!child) return;\n        // layers\n        if (\n          child.props.latLng === undefined &&\n          child.props.lat === undefined &&\n          child.props.lng === undefined\n        ) {\n          return;\n        }\n\n        const childKey =\n          child.key !== undefined && child.key !== null\n            ? child.key\n            : childIndex;\n        const dist = this.props.distanceToMouse(\n          this.dimensionsCache_[childKey],\n          mp,\n          child.props\n        );\n        if (dist < hoverDistance) {\n          distances.push({\n            key: childKey,\n            dist,\n            props: child.props,\n          });\n        }\n      });\n\n      if (distances.length) {\n        distances.sort((a, b) => a.dist - b.dist);\n        const hoverKey = distances[0].key;\n        const childProps = distances[0].props;\n\n        if (this.hoverKey_ !== hoverKey) {\n          this._onChildMouseLeave();\n\n          this._onChildMouseEnter(hoverKey, childProps);\n        }\n      } else {\n        this._onChildMouseLeave();\n      }\n    } else {\n      this._onChildMouseLeave();\n    }\n  };\n\n  _getDimensions = (key) => {\n    const childKey = key;\n    return this.dimensionsCache_[childKey];\n  };\n\n  render() {\n    const mainElementStyle = this.props.style || mainStyle;\n    this.dimensionsCache_ = {};\n\n    const markers = React.Children.map(\n      this.state.children,\n      (child, childIndex) => {\n        if (!child) return undefined;\n        if (\n          child.props.latLng === undefined &&\n          child.props.lat === undefined &&\n          child.props.lng === undefined\n        ) {\n          return React.cloneElement(child, {\n            $geoService: this.props.geoService,\n            $onMouseAllow: this._onMouseAllow,\n            $prerender: this.props.prerender,\n          });\n        }\n\n        const latLng =\n          child.props.latLng !== undefined\n            ? child.props.latLng\n            : { lat: child.props.lat, lng: child.props.lng };\n\n        const pt = this.props.insideMapPanes\n          ? this.props.geoService.fromLatLngToDivPixel(latLng)\n          : this.props.geoService.fromLatLngToCenterPixel(latLng);\n\n        const stylePtPos = {\n          left: pt.x,\n          top: pt.y,\n        };\n\n        // If the component has a southeast corner defined (either as a LatLng, or a separate\n        // lat and lng pair), set the width and height based on the distance between the northwest\n        // and the southeast corner to lock the overlay to the correct geographic bounds.\n        if (\n          child.props.seLatLng !== undefined ||\n          (child.props.seLat !== undefined && child.props.seLng !== undefined)\n        ) {\n          const seLatLng =\n            child.props.seLatLng !== undefined\n              ? child.props.seLatLng\n              : { lat: child.props.seLat, lng: child.props.seLng };\n\n          const sePt = this.props.insideMapPanes\n            ? this.props.geoService.fromLatLngToDivPixel(seLatLng)\n            : this.props.geoService.fromLatLngToCenterPixel(seLatLng);\n\n          stylePtPos.width = sePt.x - pt.x;\n          stylePtPos.height = sePt.y - pt.y;\n        }\n\n        const containerPt = this.props.geoService.fromLatLngToContainerPixel(\n          latLng\n        );\n\n        // to prevent rerender on child element i need to pass\n        // const params $getDimensions and $dimensionKey instead of dimension object\n        const childKey =\n          child.key !== undefined && child.key !== null\n            ? child.key\n            : childIndex;\n\n        this.dimensionsCache_[childKey] = {\n          x: containerPt.x,\n          y: containerPt.y,\n          ...latLng,\n        };\n\n        return (\n          <div\n            key={childKey}\n            style={{ ...style, ...stylePtPos }}\n            className={child.props.$markerHolderClassName}\n          >\n            {React.cloneElement(child, {\n              $hover: childKey === this.state.hoverKey,\n              $getDimensions: this._getDimensions,\n              $dimensionKey: childKey,\n              $geoService: this.props.geoService,\n              $onMouseAllow: this._onMouseAllow,\n              $prerender: this.props.prerender,\n            })}\n          </div>\n        );\n      }\n    );\n\n    return <div style={mainElementStyle}>{markers}</div>;\n  }\n}\n","import React from 'react';\nimport GoogleMapMarkers from './google_map_markers';\n\nconst style = {\n  width: '50%',\n  height: '50%',\n  left: '50%',\n  top: '50%',\n  // backgroundColor: 'red',\n  margin: 0,\n  padding: 0,\n  position: 'absolute',\n  // opacity: 0.3\n};\n\nexport default function (props) {\n  return (\n    <div style={style}>\n      <GoogleMapMarkers {...props} prerender />\n    </div>\n  );\n}\n","import { Loader } from '@googlemaps/js-api-loader';\n\nlet loader_;\nlet loadPromise_;\nlet resolveCustomPromise_;\n\nconst _customPromise = new Promise((resolve) => {\n  resolveCustomPromise_ = resolve;\n});\n\n// TODO add libraries language and other map options\nexport default (bootstrapURLKeys, heatmapLibrary) => {\n  // call from outside google-map-react\n  // will be as soon as loadPromise resolved\n  if (!bootstrapURLKeys) {\n    return _customPromise;\n  }\n\n  // avoid api to be loaded multiple times\n  if (loadPromise_) {\n    return loadPromise_;\n  }\n\n  if (!bootstrapURLKeys.libraries) {\n    bootstrapURLKeys.libraries = [];\n  }\n\n  const libraries = [...bootstrapURLKeys.libraries];\n\n  // note: heatmapLibrary will be deprecated on next major\n  if (heatmapLibrary) {\n    // if heatmapLibrary is present\n    // check if we need to add visualization library\n    if (libraries.length === 0 || !libraries.includes('visualization')) {\n      // if the array isEmpty or visualization is\n      // not present, push the visualization library\n      libraries.push('visualization');\n    }\n    console.warn(\n      \"heatmapLibrary will be deprecated in the future. Please use { libraries: ['visualization'] } in bootstrapURLKeys property instead\"\n    );\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (Object.keys(bootstrapURLKeys).indexOf('callback') > -1) {\n      const message = `\"callback\" key in bootstrapURLKeys is not allowed,\n                      use onGoogleApiLoaded property instead`;\n      // eslint-disable-next-line no-console\n      console.error(message);\n      throw new Error(message);\n    }\n  }\n\n  if (typeof window === 'undefined') {\n    throw new Error('google map cannot be loaded outside browser env');\n  }\n\n  const { key, ...restKeys } = bootstrapURLKeys;\n\n  // use single instance of Loader to avoid multiple api loads\n  if (!loader_) {\n    loader_ = new Loader({\n      // need to keep key as a prop for backwards compatibility\n      apiKey: key || '',\n      ...restKeys,\n      libraries,\n    });\n  }\n\n  loadPromise_ = loader_.load().then(() => {\n    resolveCustomPromise_(window.google.maps);\n    return window.google.maps;\n  });\n\n  resolveCustomPromise_(loadPromise_);\n\n  return loadPromise_;\n};\n","/* eslint-disable import/prefer-default-export */\n\nexport function wrap(n, min, max) {\n  const d = max - min;\n  return n === max ? n : ((((n - min) % d) + d) % d) + min;\n}\n","import { wrap } from './wrap';\n\nexport default class LatLng {\n  static convert = (a) => {\n    if (a instanceof LatLng) {\n      return a;\n    }\n\n    if (Array.isArray(a)) {\n      return new LatLng(a[0], a[1]);\n    }\n\n    if ('lng' in a && 'lat' in a) {\n      return new LatLng(a.lat, a.lng);\n    }\n\n    return a;\n  };\n\n  constructor(lat, lng) {\n    if (isNaN(lat) || isNaN(lng)) {\n      throw new Error(`Invalid LatLng object: (${lat}, ${lng})`);\n    }\n    this.lat = +lat;\n    this.lng = +lng;\n  }\n\n  wrap() {\n    return new LatLng(this.lat, wrap(this.lng, -180, 180));\n  }\n}\n","/* eslint-disable class-methods-use-this */\nimport Point from '@mapbox/point-geometry';\nimport LatLng from './lat_lng';\nimport { wrap } from './wrap';\n\n// A single transform, generally used for a single tile to be scaled, rotated, and zoomed.\nexport default class Transform {\n  constructor(tileSize, minZoom, maxZoom) {\n    this.tileSize = tileSize || 512; // constant\n\n    this._minZoom = minZoom || 0;\n    this._maxZoom = maxZoom || 52;\n\n    this.latRange = [-85.05113, 85.05113];\n\n    this.width = 0;\n    this.height = 0;\n    this.zoom = 0;\n    this.center = new LatLng(0, 0);\n    this.angle = 0;\n  }\n\n  get minZoom() {\n    return this._minZoom;\n  }\n\n  set minZoom(zoom) {\n    this._minZoom = zoom;\n    this.zoom = Math.max(this.zoom, zoom);\n  }\n\n  get maxZoom() {\n    return this._maxZoom;\n  }\n\n  set maxZoom(zoom) {\n    this._maxZoom = zoom;\n    this.zoom = Math.min(this.zoom, zoom);\n  }\n\n  get worldSize() {\n    return this.tileSize * this.scale;\n  }\n\n  get centerPoint() {\n    return new Point(0, 0); // this.size._div(2);\n  }\n\n  get size() {\n    return new Point(this.width, this.height);\n  }\n\n  get bearing() {\n    return (-this.angle / Math.PI) * 180;\n  }\n\n  set bearing(bearing) {\n    this.angle = (-wrap(bearing, -180, 180) * Math.PI) / 180;\n  }\n\n  get zoom() {\n    return this._zoom;\n  }\n\n  set zoom(zoom) {\n    const zoomV = Math.min(Math.max(zoom, this.minZoom), this.maxZoom);\n    this._zoom = zoomV;\n    this.scale = this.zoomScale(zoomV);\n    this.tileZoom = Math.floor(zoomV);\n    this.zoomFraction = zoomV - this.tileZoom;\n  }\n\n  zoomScale(zoom) {\n    return Math.pow(2, zoom);\n  }\n\n  scaleZoom(scale) {\n    return Math.log(scale) / Math.LN2;\n  }\n\n  project(latlng, worldSize) {\n    return new Point(\n      this.lngX(latlng.lng, worldSize),\n      this.latY(latlng.lat, worldSize)\n    );\n  }\n\n  unproject(point, worldSize) {\n    return new LatLng(\n      this.yLat(point.y, worldSize),\n      this.xLng(point.x, worldSize)\n    );\n  }\n\n  get x() {\n    return this.lngX(this.center.lng);\n  }\n\n  get y() {\n    return this.latY(this.center.lat);\n  }\n\n  get point() {\n    return new Point(this.x, this.y);\n  }\n\n  // lat/lon <-> absolute pixel coords convertion\n  lngX(lon, worldSize) {\n    return ((180 + lon) * (worldSize || this.worldSize)) / 360;\n  }\n\n  // latitude to absolute y coord\n  latY(lat, worldSize) {\n    const y =\n      (180 / Math.PI) * Math.log(Math.tan(Math.PI / 4 + (lat * Math.PI) / 360));\n    return ((180 - y) * (worldSize || this.worldSize)) / 360;\n  }\n\n  xLng(x, worldSize) {\n    return (x * 360) / (worldSize || this.worldSize) - 180;\n  }\n\n  yLat(y, worldSize) {\n    const y2 = 180 - (y * 360) / (worldSize || this.worldSize);\n    return (360 / Math.PI) * Math.atan(Math.exp((y2 * Math.PI) / 180)) - 90;\n  }\n\n  locationPoint(latlng) {\n    const p = this.project(latlng);\n    return this.centerPoint._sub(this.point._sub(p)._rotate(this.angle));\n  }\n\n  pointLocation(p) {\n    const p2 = this.centerPoint._sub(p)._rotate(-this.angle);\n    return this.unproject(this.point.sub(p2));\n  }\n}\n","import Point from '@mapbox/point-geometry';\n\nimport LatLng from './lat_lng';\nimport Transform from './transform';\n\nexport default class Geo {\n  constructor(tileSize) {\n    // left_top view пользует гугл\n    // super();\n    this.hasSize_ = false;\n    this.hasView_ = false;\n    this.transform_ = new Transform(tileSize || 512);\n  }\n\n  setView(center, zoom, bearing) {\n    this.transform_.center = LatLng.convert(center);\n    this.transform_.zoom = +zoom;\n    this.transform_.bearing = +bearing;\n    this.hasView_ = true;\n  }\n\n  setViewSize(width, height) {\n    this.transform_.width = width;\n    this.transform_.height = height;\n    this.hasSize_ = true;\n  }\n\n  setMapCanvasProjection(maps, mapCanvasProjection) {\n    this.maps_ = maps;\n    this.mapCanvasProjection_ = mapCanvasProjection;\n  }\n\n  canProject() {\n    return this.hasSize_ && this.hasView_;\n  }\n\n  hasSize() {\n    return this.hasSize_;\n  }\n\n  /** Returns the pixel position relative to the map center. */\n  fromLatLngToCenterPixel(ptLatLng) {\n    return this.transform_.locationPoint(LatLng.convert(ptLatLng));\n  }\n\n  /**\n   * Returns the pixel position relative to the map panes,\n   * or relative to the map center if there are no panes.\n   */\n  fromLatLngToDivPixel(ptLatLng) {\n    if (this.mapCanvasProjection_) {\n      const latLng = new this.maps_.LatLng(ptLatLng.lat, ptLatLng.lng);\n      return this.mapCanvasProjection_.fromLatLngToDivPixel(latLng);\n    }\n    return this.fromLatLngToCenterPixel(ptLatLng);\n  }\n\n  /** Returns the pixel position relative to the map top-left. */\n  fromLatLngToContainerPixel(ptLatLng) {\n    if (this.mapCanvasProjection_) {\n      const latLng = new this.maps_.LatLng(ptLatLng.lat, ptLatLng.lng);\n      return this.mapCanvasProjection_.fromLatLngToContainerPixel(latLng);\n    }\n\n    const pt = this.fromLatLngToCenterPixel(ptLatLng);\n    pt.x -=\n      this.transform_.worldSize * Math.round(pt.x / this.transform_.worldSize);\n\n    pt.x += this.transform_.width / 2;\n    pt.y += this.transform_.height / 2;\n\n    return pt;\n  }\n\n  /** Returns the LatLng for the given offset from the map top-left. */\n  fromContainerPixelToLatLng(ptXY) {\n    if (this.mapCanvasProjection_) {\n      const latLng = this.mapCanvasProjection_.fromContainerPixelToLatLng(ptXY);\n      return { lat: latLng.lat(), lng: latLng.lng() };\n    }\n\n    const ptxy = { ...ptXY };\n    ptxy.x -= this.transform_.width / 2;\n    ptxy.y -= this.transform_.height / 2;\n    const ptRes = this.transform_.pointLocation(Point.convert(ptxy));\n\n    ptRes.lng -= 360 * Math.round(ptRes.lng / 360); // convert 2 google format\n    return ptRes;\n  }\n\n  getWidth() {\n    return this.transform_.width;\n  }\n\n  getHeight() {\n    return this.transform_.height;\n  }\n\n  getZoom() {\n    return this.transform_.zoom;\n  }\n\n  getCenter() {\n    const ptRes = this.transform_.pointLocation({ x: 0, y: 0 });\n\n    return ptRes;\n  }\n\n  getBounds(margins, roundFactor) {\n    const bndT = (margins && margins[0]) || 0;\n    const bndR = (margins && margins[1]) || 0;\n    const bndB = (margins && margins[2]) || 0;\n    const bndL = (margins && margins[3]) || 0;\n\n    if (\n      this.getWidth() - bndR - bndL > 0 &&\n      this.getHeight() - bndT - bndB > 0\n    ) {\n      const topLeftCorner = this.transform_.pointLocation(\n        Point.convert({\n          x: bndL - this.getWidth() / 2,\n          y: bndT - this.getHeight() / 2,\n        })\n      );\n      const bottomRightCorner = this.transform_.pointLocation(\n        Point.convert({\n          x: this.getWidth() / 2 - bndR,\n          y: this.getHeight() / 2 - bndB,\n        })\n      );\n\n      let res = [\n        topLeftCorner.lat,\n        topLeftCorner.lng, // NW\n        bottomRightCorner.lat,\n        bottomRightCorner.lng, // SE\n        bottomRightCorner.lat,\n        topLeftCorner.lng, // SW\n        topLeftCorner.lat,\n        bottomRightCorner.lng, // NE\n      ];\n\n      if (roundFactor) {\n        res = res.map((r) => Math.round(r * roundFactor) / roundFactor);\n      }\n      return res;\n    }\n\n    return [0, 0, 0, 0];\n  }\n}\n","export default function raf(callback) {\n  if (window.requestAnimationFrame) {\n    return window.requestAnimationFrame(callback);\n  }\n\n  const nativeRaf =\n    window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n\n  return nativeRaf\n    ? nativeRaf(callback)\n    : window.setTimeout(callback, 1e3 / 60);\n}\n","const log2 = Math.log2 ? Math.log2 : (x) => Math.log(x) / Math.LN2;\n\nexport default log2;\n","// source taken from https://github.com/rackt/redux/blob/master/src/utils/pick.js\n\nexport default function pick(obj, fn) {\n  return Object.keys(obj).reduce((result, key) => {\n    if (fn(obj[key])) {\n        result[key] = obj[key]; // eslint-disable-line\n    }\n    return result;\n  }, {});\n}\n","const isEmpty = (val) => {\n  // check for empty object {}, array []\n  if (val !== null && typeof val === 'object') {\n    if (Object.keys(val).length === 0) {\n      return true;\n    }\n  } else if (val === null || val === undefined || val === '') {\n    // check for undefined, null and \"\"\n    return true;\n  }\n  return false;\n};\n\nexport default isEmpty;\n","function isObjectLike(value) {\n  return !!value && typeof value === 'object';\n}\n\nconst objectToString = Object.prototype.toString;\n\nexport default function isNumber(value) {\n  const numberTag = '[object Number]';\n  return (\n    typeof value === 'number' ||\n    (isObjectLike(value) && objectToString.call(value) === numberTag)\n  );\n}\n","// http://stackoverflow.com/questions/5899783/detect-safari-chrome-ie-firefox-opera-with-user-agent\nlet detectBrowserResult_ = null;\n\nexport default function detectBrowser() {\n  if (detectBrowserResult_) {\n    return detectBrowserResult_;\n  }\n\n  if (typeof navigator !== 'undefined') {\n    const isExplorer = navigator.userAgent.indexOf('MSIE') > -1;\n    const isFirefox = navigator.userAgent.indexOf('Firefox') > -1;\n    const isOpera = navigator.userAgent.toLowerCase().indexOf('op') > -1;\n\n    let isChrome = navigator.userAgent.indexOf('Chrome') > -1;\n    let isSafari = navigator.userAgent.indexOf('Safari') > -1;\n\n    if (isChrome && isSafari) {\n      isSafari = false;\n    }\n\n    if (isChrome && isOpera) {\n      isChrome = false;\n    }\n\n    detectBrowserResult_ = {\n      isExplorer,\n      isFirefox,\n      isOpera,\n      isChrome,\n      isSafari,\n    };\n    return detectBrowserResult_;\n  }\n\n  detectBrowserResult_ = {\n    isChrome: true,\n    isExplorer: false,\n    isFirefox: false,\n    isOpera: false,\n    isSafari: false,\n  };\n\n  return detectBrowserResult_;\n}\n","// source taken from https://github.com/rackt/redux/blob/master/src/utils/isPlainObject.js\nconst fnToString = (fn) => Function.prototype.toString.call(fn);\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nexport default function isPlainObject(obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  const proto =\n    typeof obj.constructor === 'function'\n      ? Object.getPrototypeOf(obj)\n      : Object.prototype;\n\n  if (proto === null) {\n    return true;\n  }\n\n  const constructor = proto.constructor;\n\n  return (\n    typeof constructor === 'function' &&\n    constructor instanceof constructor &&\n    fnToString(constructor) === fnToString(Object)\n  );\n}\n","// feature detection for passive support\n// see: https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\nfunction hasPassiveSupport() {\n  let passiveSupported = false;\n\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get() {\n        passiveSupported = true;\n      },\n    });\n\n    window.addEventListener('test', options, options);\n    window.removeEventListener('test', options, options);\n  } catch (err) {\n    passiveSupported = false;\n  }\n\n  return passiveSupported;\n}\n\nexport default function addPassiveEventListener(\n  element,\n  eventName,\n  func,\n  capture\n) {\n  element.addEventListener(\n    eventName,\n    func,\n    hasPassiveSupport()\n      ? {\n          capture,\n          passive: true,\n        }\n      : capture\n  );\n}\n","/* eslint-disable */\n/**\n* Detect Element Resize.\n* Forked in order to guard against unsafe 'window' and 'document' references.\n*\n* https://github.com/sdecima/javascript-detect-element-resize\n* Sebastian Decima\n*\n* version: 0.5.3\n**/\n\nimport addPassiveEventListener from './passiveEvents';\n\n// Reliable `window` and `document` detection\nvar canUseDOM = !!(typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement);\n\n// Check `document` and `window` in case of server-side rendering\nvar _window;\nif (canUseDOM) {\n  _window = window;\n} else if (typeof self !== 'undefined') {\n  _window = self;\n} else {\n  _window = this;\n}\n\nvar attachEvent = typeof document !== 'undefined' && document.attachEvent;\nvar stylesCreated = false;\n\nif (canUseDOM && !attachEvent) {\n  var requestFrame = (function () {\n    var raf = _window.requestAnimationFrame ||\n      _window.mozRequestAnimationFrame ||\n      _window.webkitRequestAnimationFrame ||\n      function (fn) {\n        return _window.setTimeout(fn, 20);\n      };\n    return function (fn) {\n      return raf(fn);\n    };\n  })();\n\n  var cancelFrame = (function () {\n    var cancel = _window.cancelAnimationFrame ||\n      _window.mozCancelAnimationFrame ||\n      _window.webkitCancelAnimationFrame ||\n      _window.clearTimeout;\n    return function (id) {\n      return cancel(id);\n    };\n  })();\n\n  var resetTriggers = function (element) {\n    var triggers = element.__resizeTriggers__,\n      expand = triggers.firstElementChild,\n      contract = triggers.lastElementChild,\n      expandChild = expand.firstElementChild;\n    contract.scrollLeft = contract.scrollWidth;\n    contract.scrollTop = contract.scrollHeight;\n    expandChild.style.width = expand.offsetWidth + 1 + 'px';\n    expandChild.style.height = expand.offsetHeight + 1 + 'px';\n    expand.scrollLeft = expand.scrollWidth;\n    expand.scrollTop = expand.scrollHeight;\n  };\n\n  var checkTriggers = function (element) {\n    return element.offsetWidth != element.__resizeLast__.width ||\n      element.offsetHeight != element.__resizeLast__.height;\n  };\n\n  var scrollListener = function (e) {\n    var element = this;\n    resetTriggers(this);\n    if (this.__resizeRAF__) cancelFrame(this.__resizeRAF__);\n    this.__resizeRAF__ = requestFrame(function () {\n      if (checkTriggers(element)) {\n        element.__resizeLast__.width = element.offsetWidth;\n        element.__resizeLast__.height = element.offsetHeight;\n        element.__resizeListeners__.forEach(function (fn) {\n          fn.call(element, e);\n        });\n      }\n    });\n  };\n\n  /* Detect CSS Animations support to detect element display/re-attach */\n  var animation = false,\n    animationstring = 'animation',\n    keyframeprefix = '',\n    animationstartevent = 'animationstart',\n    domPrefixes = 'Webkit Moz O ms'.split(' '),\n    startEvents = 'webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(\n      ' '\n    ),\n    pfx = '';\n\n  if (canUseDOM) {\n    var elm = document.createElement('fakeelement');\n    if (elm.style.animationName !== undefined) {\n      animation = true;\n    }\n\n    if (animation === false) {\n      for (var i = 0; i < domPrefixes.length; i++) {\n        if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n          pfx = domPrefixes[i];\n          animationstring = pfx + 'Animation';\n          keyframeprefix = '-' + pfx.toLowerCase() + '-';\n          animationstartevent = startEvents[i];\n          animation = true;\n          break;\n        }\n      }\n    }\n  }\n\n  var animationName = 'resizeanim';\n  var animationKeyframes = '@' +\n    keyframeprefix +\n    'keyframes ' +\n    animationName +\n    ' { from { opacity: 0; } to { opacity: 0; } } ';\n  var animationStyle = keyframeprefix +\n    'animation: 1ms ' +\n    animationName +\n    '; ';\n}\n\nvar createStyles = function () {\n  if (!stylesCreated) {\n    //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n    var css = (animationKeyframes ? animationKeyframes : '') +\n      '.resize-triggers { ' +\n      (animationStyle ? animationStyle : '') +\n      'visibility: hidden; opacity: 0; } ' +\n      '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n      head = document.head || document.getElementsByTagName('head')[0],\n      style = document.createElement('style');\n\n    style.type = 'text/css';\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    head.appendChild(style);\n    stylesCreated = true;\n  }\n};\n\nvar addResizeListener = function (element, fn) {\n  if (element.parentNode === undefined) {\n    var tempParentDiv = document.createElement('div');\n    element.parentNode = tempParentDiv;\n  }\n  element = element.parentNode;\n  if (attachEvent)\n    element.attachEvent('onresize', fn);\n  else {\n    if (!element.__resizeTriggers__) {\n      if (getComputedStyle(element).position == 'static')\n        element.style.position = 'relative';\n      createStyles();\n      element.__resizeLast__ = {};\n      element.__resizeListeners__ = [];\n      (element.__resizeTriggers__ = document.createElement(\n        'div'\n      )).className = 'resize-triggers';\n      element.__resizeTriggers__.innerHTML = '<div class=\"expand-trigger\"><div></div></div>' +\n        '<div class=\"contract-trigger\"></div>';\n      element.appendChild(element.__resizeTriggers__);\n      resetTriggers(element);\n\n      addPassiveEventListener(element, 'scroll', scrollListener, true);\n\n      /* Listen for a css animation to detect element display/re-attach */\n      animationstartevent &&\n        element.__resizeTriggers__.addEventListener(\n          animationstartevent,\n          function (e) {\n            if (e.animationName == animationName) resetTriggers(element);\n          }\n        );\n    }\n    element.__resizeListeners__.push(fn);\n  }\n};\n\nvar removeResizeListener = function (element, fn) {\n  element = element.parentNode;\n  if (attachEvent)\n    element.detachEvent('onresize', fn);\n  else {\n    element.__resizeListeners__.splice(\n      element.__resizeListeners__.indexOf(fn),\n      1\n    );\n    if (!element.__resizeListeners__.length) {\n      element.removeEventListener('scroll', scrollListener);\n      element.__resizeTriggers__ = !element.removeChild(\n        element.__resizeTriggers__\n      );\n    }\n  }\n};\n\nexport {\n  addResizeListener,\n  removeResizeListener,\n};\n","/* eslint-disable import/no-extraneous-dependencies, react/forbid-prop-types, react/no-find-dom-node, no-console, no-undef */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\n\n// helpers\nimport GoogleMapMap from './google_map_map';\nimport MarkerDispatcher from './marker_dispatcher';\nimport GoogleMapMarkers from './google_map_markers';\nimport GoogleMapMarkersPrerender from './google_map_markers_prerender';\nimport { generateHeatmap, optionsHeatmap } from './google_heatmap';\n\n// loaders\nimport googleMapLoader from './loaders/google_map_loader';\n\n// lib\nimport Geo from './lib/geo';\n\n// tools\nimport raf from './utils/raf';\nimport log2 from './utils/log2';\nimport omit from './utils/omit';\nimport pick from './utils/pick';\nimport isEmpty from './utils/isEmpty';\nimport isNumber from './utils/isNumber';\nimport detectBrowser from './utils/detect';\nimport shallowEqual from './utils/shallowEqual';\nimport isPlainObject from './utils/isPlainObject';\nimport isArraysEqualEps from './utils/isArraysEqualEps';\nimport {\n  addResizeListener,\n  removeResizeListener,\n} from './utils/detectElementResize';\nimport addPassiveEventListener from './utils/passiveEvents';\n\n// consts\nconst kEPS = 0.00001;\nconst K_GOOGLE_TILE_SIZE = 256;\n// real minZoom calculated here _getMinZoom\nconst K_IDLE_TIMEOUT = 100;\nconst K_IDLE_CLICK_TIMEOUT = 300;\nconst DEFAULT_MIN_ZOOM = 3;\n// Starting with version 3.32, the maps API calls `draw()` each frame during\n// a zoom animation.\nconst DRAW_CALLED_DURING_ANIMATION_VERSION = 32;\nconst IS_REACT_16 = ReactDOM.createPortal !== undefined;\n\nconst createPortal = IS_REACT_16\n  ? ReactDOM.createPortal\n  : ReactDOM.unstable_renderSubtreeIntoContainer;\n\nfunction defaultOptions_(/* maps */) {\n  return {\n    overviewMapControl: false,\n    streetViewControl: false,\n    rotateControl: true,\n    mapTypeControl: false,\n    // disable poi\n    styles: [\n      {\n        featureType: 'poi',\n        elementType: 'labels',\n        stylers: [{ visibility: 'off' }],\n      },\n    ],\n    minZoom: DEFAULT_MIN_ZOOM, // dynamically recalculted if possible during init\n  };\n}\n\nconst latLng2Obj = (latLng) =>\n  isPlainObject(latLng) ? latLng : { lat: latLng[0], lng: latLng[1] };\n\nconst _checkMinZoom = (zoom, minZoom) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (zoom < minZoom) {\n      console.warn(\n        'GoogleMap: ' + // eslint-disable-line\n          'minZoom option is less than recommended ' +\n          'minZoom option for your map sizes.\\n' +\n          'overrided to value ' +\n          minZoom\n      );\n    }\n  }\n\n  if (minZoom < zoom) {\n    return zoom;\n  }\n  return minZoom;\n};\n\nconst isFullScreen = () =>\n  document.fullscreen ||\n  document.webkitIsFullScreen ||\n  document.mozFullScreen ||\n  document.msFullscreenElement;\n\nclass GoogleMap extends Component {\n  static propTypes = {\n    apiKey: PropTypes.string,\n    bootstrapURLKeys: PropTypes.any,\n\n    defaultCenter: PropTypes.oneOfType([\n      PropTypes.array,\n      PropTypes.shape({\n        lat: PropTypes.number,\n        lng: PropTypes.number,\n      }),\n    ]),\n    center: PropTypes.oneOfType([\n      PropTypes.array,\n      PropTypes.shape({\n        lat: PropTypes.number,\n        lng: PropTypes.number,\n      }),\n    ]),\n    defaultZoom: PropTypes.number,\n    zoom: PropTypes.number,\n    onBoundsChange: PropTypes.func,\n    onChange: PropTypes.func,\n    onClick: PropTypes.func,\n    onChildClick: PropTypes.func,\n    onChildMouseDown: PropTypes.func,\n    onChildMouseUp: PropTypes.func,\n    onChildMouseMove: PropTypes.func,\n    onChildMouseEnter: PropTypes.func,\n    onChildMouseLeave: PropTypes.func,\n    onZoomAnimationStart: PropTypes.func,\n    onZoomAnimationEnd: PropTypes.func,\n    onDrag: PropTypes.func,\n    onDragEnd: PropTypes.func,\n    onMapTypeIdChange: PropTypes.func,\n    onTilesLoaded: PropTypes.func,\n    options: PropTypes.any,\n    distanceToMouse: PropTypes.func,\n    hoverDistance: PropTypes.number,\n    debounced: PropTypes.bool,\n    margin: PropTypes.array,\n    googleMapLoader: PropTypes.any,\n    onGoogleApiLoaded: PropTypes.func,\n    yesIWantToUseGoogleMapApiInternals: PropTypes.bool,\n    draggable: PropTypes.bool,\n    style: PropTypes.any,\n    resetBoundsOnResize: PropTypes.bool,\n    layerTypes: PropTypes.arrayOf(PropTypes.string), // ['TransitLayer', 'TrafficLayer']\n    shouldUnregisterMapOnUnmount: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    distanceToMouse(pt, mousePos /* , markerProps */) {\n      return Math.sqrt(\n        (pt.x - mousePos.x) * (pt.x - mousePos.x) +\n          (pt.y - mousePos.y) * (pt.y - mousePos.y)\n      );\n    },\n    hoverDistance: 30,\n    debounced: true,\n    options: defaultOptions_,\n    googleMapLoader,\n    yesIWantToUseGoogleMapApiInternals: false,\n    style: {\n      width: '100%',\n      height: '100%',\n      margin: 0,\n      padding: 0,\n      position: 'relative',\n    },\n    layerTypes: [],\n    heatmap: {},\n    heatmapLibrary: false,\n    shouldUnregisterMapOnUnmount: true,\n  };\n\n  static googleMapLoader = googleMapLoader; // eslint-disable-line\n\n  constructor(props) {\n    super(props);\n    this.mounted_ = false;\n    this.initialized_ = false;\n    this.googleApiLoadedCalled_ = false;\n\n    this.map_ = null;\n    this.maps_ = null;\n    this.prevBounds_ = null;\n    this.heatmap = null;\n\n    this.layers_ = {};\n\n    this.mouse_ = null;\n    this.mouseMoveTime_ = 0;\n    this.boundingRect_ = null;\n    this.mouseInMap_ = true;\n\n    this.dragTime_ = 0;\n    this.fireMouseEventOnIdle_ = false;\n    this.updateCounter_ = 0;\n\n    this.markersDispatcher_ = new MarkerDispatcher(this);\n    this.geoService_ = new Geo(K_GOOGLE_TILE_SIZE);\n    this.centerIsObject_ = isPlainObject(this.props.center);\n\n    this.minZoom_ = DEFAULT_MIN_ZOOM;\n    this.defaultDraggableOption_ = true;\n\n    this.zoomControlClickTime_ = 0;\n\n    this.childMouseDownArgs_ = null;\n    this.childMouseUpTime_ = 0;\n\n    this.googleMapDom_ = null;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.props.apiKey) {\n        console.warn(\n          'GoogleMap: ' + // eslint-disable-line no-console\n            'apiKey is deprecated, use ' +\n            'bootstrapURLKeys={{key: YOUR_API_KEY}} instead.'\n        );\n      }\n\n      if (this.props.onBoundsChange) {\n        console.warn(\n          'GoogleMap: ' + // eslint-disable-line no-console\n            'onBoundsChange is deprecated, use ' +\n            'onChange({center, zoom, bounds, ...other}) instead.'\n        );\n      }\n\n      if (isEmpty(this.props.center) && isEmpty(this.props.defaultCenter)) {\n        console.warn(\n          'GoogleMap: center or defaultCenter property must be defined' // eslint-disable-line no-console\n        );\n      }\n\n      if (isEmpty(this.props.zoom) && isEmpty(this.props.defaultZoom)) {\n        console.warn(\n          'GoogleMap: zoom or defaultZoom property must be defined' // eslint-disable-line no-console\n        );\n      }\n    }\n\n    if (this._isCenterDefined(this.props.center || this.props.defaultCenter)) {\n      const propsCenter = latLng2Obj(\n        this.props.center || this.props.defaultCenter\n      );\n      this.geoService_.setView(\n        propsCenter,\n        this.props.zoom || this.props.defaultZoom,\n        0\n      );\n    }\n\n    this.zoomAnimationInProgress_ = false;\n\n    this.state = {\n      overlay: null,\n    };\n  }\n\n  componentDidMount() {\n    this.mounted_ = true;\n    addPassiveEventListener(window, 'resize', this._onWindowResize, false);\n    addPassiveEventListener(window, 'keydown', this._onKeyDownCapture, true);\n    const mapDom = ReactDOM.findDOMNode(this.googleMapDom_);\n    // gmap can't prevent map drag if mousedown event already occured\n    // the only workaround I find is prevent mousedown native browser event\n\n    if (mapDom) {\n      addPassiveEventListener(\n        mapDom,\n        'mousedown',\n        this._onMapMouseDownNative,\n        true\n      );\n    }\n\n    addPassiveEventListener(window, 'mouseup', this._onChildMouseUp, false);\n    const bootstrapURLKeys = {\n      ...(this.props.apiKey && { key: this.props.apiKey }),\n      ...this.props.bootstrapURLKeys,\n    };\n\n    this.props.googleMapLoader(bootstrapURLKeys, this.props.heatmapLibrary); // we can start load immediatly\n\n    setTimeout(\n      () => {\n        // to detect size\n        this._setViewSize();\n        if (\n          this._isCenterDefined(this.props.center || this.props.defaultCenter)\n        ) {\n          this._initMap();\n        }\n      },\n      0,\n      this\n    );\n    if (this.props.resetBoundsOnResize) {\n      const that = this;\n      addResizeListener(mapDom, that._mapDomResizeCallback);\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    // draggable does not affect inner components\n    return (\n      !shallowEqual(\n        omit(this.props, ['draggable']),\n        omit(nextProps, ['draggable'])\n      ) || !shallowEqual(this.state, nextState)\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!shallowEqual(prevProps.defaultCenter, this.props.defaultCenter)) {\n        console.warn(\n          \"GoogleMap: defaultCenter prop changed. You can't change default props.\"\n        );\n      }\n\n      if (!shallowEqual(prevProps.defaultZoom, this.props.defaultZoom)) {\n        console.warn(\n          \"GoogleMap: defaultZoom prop changed. You can't change default props.\"\n        );\n      }\n    }\n\n    if (\n      !this._isCenterDefined(prevProps.center) &&\n      this._isCenterDefined(this.props.center)\n    ) {\n      setTimeout(() => this._initMap(), 0);\n    }\n\n    if (this.map_) {\n      const centerLatLng = this.geoService_.getCenter();\n      if (this._isCenterDefined(this.props.center)) {\n        const currentCenter = latLng2Obj(this.props.center);\n        const prevCenter = this._isCenterDefined(prevProps.center)\n          ? latLng2Obj(prevProps.center)\n          : null;\n\n        if (\n          !prevCenter ||\n          Math.abs(currentCenter.lat - prevCenter.lat) +\n            Math.abs(currentCenter.lng - prevCenter.lng) >\n            kEPS\n        ) {\n          if (\n            Math.abs(currentCenter.lat - centerLatLng.lat) +\n              Math.abs(currentCenter.lng - centerLatLng.lng) >\n            kEPS\n          ) {\n            this.map_.panTo({\n              lat: currentCenter.lat,\n              lng: currentCenter.lng,\n            });\n          }\n        }\n      }\n\n      if (!isEmpty(this.props.zoom)) {\n        // if zoom chaged by user\n        if (Math.abs(this.props.zoom - prevProps.zoom) > 0) {\n          this.map_.setZoom(this.props.zoom);\n        }\n      }\n\n      if (!isEmpty(prevProps.draggable) && isEmpty(this.props.draggable)) {\n        // reset to default\n        this.map_.setOptions({ draggable: this.defaultDraggableOption_ });\n      } else if (!shallowEqual(prevProps.draggable, this.props.draggable)) {\n        // also prevent this on window 'mousedown' event to prevent map move\n        this.map_.setOptions({ draggable: this.props.draggable });\n      }\n\n      // use shallowEqual to try avoid calling map._setOptions if only the ref changes\n      if (\n        !isEmpty(this.props.options) &&\n        !shallowEqual(prevProps.options, this.props.options)\n      ) {\n        const mapPlainObjects = pick(this.maps_, isPlainObject);\n        let options =\n          typeof this.props.options === 'function'\n            ? this.props.options(mapPlainObjects)\n            : this.props.options;\n        // remove zoom, center and draggable options as these are managed by google-maps-react\n        options = omit(options, ['zoom', 'center', 'draggable']);\n\n        if ('minZoom' in options) {\n          const minZoom = this._computeMinZoom(options.minZoom);\n          options.minZoom = _checkMinZoom(options.minZoom, minZoom);\n        }\n\n        this.map_.setOptions(options);\n      }\n\n      if (!shallowEqual(this.props.layerTypes, prevProps.layerTypes)) {\n        Object.keys(this.layers_).forEach((layerKey) => {\n          this.layers_[layerKey].setMap(null);\n          delete this.layers_[layerKey];\n        });\n        this._setLayers(this.props.layerTypes);\n      }\n\n      if (\n        this.heatmap &&\n        !shallowEqual(this.props.heatmap.positions, prevProps.heatmap.positions)\n      ) {\n        this.heatmap.setData(\n          this.props.heatmap.positions.map((p) => ({\n            location: new this.maps_.LatLng(p.lat, p.lng),\n            weight: p.weight,\n          }))\n        );\n      }\n      if (\n        this.heatmap &&\n        !shallowEqual(this.props.heatmap.options, prevProps.heatmap.options)\n      ) {\n        Object.keys(this.props.heatmap.options).forEach((option) => {\n          this.heatmap.set(option, this.props.heatmap.options[option]);\n        });\n      }\n    }\n    // emit actions\n    this.markersDispatcher_.emit('kON_CHANGE');\n\n    if (!shallowEqual(this.props.hoverDistance, prevProps.hoverDistance)) {\n      this.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted_ = false;\n    const mapDom = ReactDOM.findDOMNode(this.googleMapDom_);\n    if (mapDom) {\n      mapDom.removeEventListener('mousedown', this._onMapMouseDownNative, true);\n    }\n    window.removeEventListener('resize', this._onWindowResize);\n    window.removeEventListener('keydown', this._onKeyDownCapture);\n    window.removeEventListener('mouseup', this._onChildMouseUp, false);\n    if (this.props.resetBoundsOnResize) {\n      removeResizeListener(mapDom, this._mapDomResizeCallback);\n    }\n\n    if (this.overlay_) {\n      // this triggers overlay_.onRemove(), which will unmount the <GoogleMapMarkers/>\n      this.overlay_.setMap(null);\n    }\n\n    if (this.maps_ && this.map_ && this.props.shouldUnregisterMapOnUnmount) {\n      // fix google, as otherwise listeners works even without map\n      this.map_.setOptions({ scrollwheel: false });\n      this.maps_.event.clearInstanceListeners(this.map_);\n    }\n\n    if (this.props.shouldUnregisterMapOnUnmount) {\n      this.map_ = null;\n      this.maps_ = null;\n    }\n    this.markersDispatcher_.dispose();\n\n    this.resetSizeOnIdle_ = false;\n\n    if (this.props.shouldUnregisterMapOnUnmount) {\n      delete this.map_;\n      delete this.markersDispatcher_;\n    }\n  }\n\n  // calc minZoom if map size available\n  // it's better to not set minZoom less than this calculation gives\n  // otherwise there is no homeomorphism between screen coordinates and map\n  // (one map coordinate can have different screen coordinates)\n  _getMinZoom = () => {\n    if (this.geoService_.getWidth() > 0 || this.geoService_.getHeight() > 0) {\n      const tilesPerWidth =\n        Math.ceil(this.geoService_.getWidth() / K_GOOGLE_TILE_SIZE) + 2;\n      const tilesPerHeight =\n        Math.ceil(this.geoService_.getHeight() / K_GOOGLE_TILE_SIZE) + 2;\n      const maxTilesPerDim = Math.max(tilesPerWidth, tilesPerHeight);\n      return Math.ceil(log2(maxTilesPerDim));\n    }\n    return DEFAULT_MIN_ZOOM;\n  };\n\n  _computeMinZoom = (minZoom) => {\n    if (!isEmpty(minZoom)) {\n      return minZoom;\n    }\n    return this._getMinZoom();\n  };\n\n  _mapDomResizeCallback = () => {\n    this.resetSizeOnIdle_ = true;\n    if (this.maps_) {\n      const originalCenter = this.props.center || this.props.defaultCenter;\n      const currentCenter = this.map_.getCenter();\n      this.maps_.event.trigger(this.map_, 'resize');\n      this.map_.setCenter(\n        this.props.resetBoundsOnResize ? originalCenter : currentCenter\n      );\n    }\n  };\n\n  _setLayers = (layerTypes) => {\n    layerTypes.forEach((layerType) => {\n      this.layers_[layerType] = new this.maps_[layerType]();\n      this.layers_[layerType].setMap(this.map_);\n    });\n  };\n\n  _renderPortal = () => (\n    <GoogleMapMarkers\n      experimental={this.props.experimental}\n      onChildClick={this._onChildClick}\n      onChildMouseDown={this._onChildMouseDown}\n      onChildMouseEnter={this._onChildMouseEnter}\n      onChildMouseLeave={this._onChildMouseLeave}\n      geoService={this.geoService_}\n      insideMapPanes\n      distanceToMouse={this.props.distanceToMouse}\n      getHoverDistance={this._getHoverDistance}\n      dispatcher={this.markersDispatcher_}\n    />\n  );\n\n  _initMap = () => {\n    // only initialize the map once\n    if (this.initialized_) {\n      return;\n    }\n    this.initialized_ = true;\n\n    const propsCenter = latLng2Obj(\n      this.props.center || this.props.defaultCenter\n    );\n    this.geoService_.setView(\n      propsCenter,\n      this.props.zoom || this.props.defaultZoom,\n      0\n    );\n\n    this._onBoundsChanged(); // now we can calculate map bounds center etc...\n\n    const bootstrapURLKeys = {\n      ...(this.props.apiKey && { key: this.props.apiKey }),\n      ...this.props.bootstrapURLKeys,\n    };\n\n    this.props\n      .googleMapLoader(bootstrapURLKeys, this.props.heatmapLibrary)\n      .then((maps) => {\n        if (!this.mounted_) {\n          return;\n        }\n\n        const centerLatLng = this.geoService_.getCenter();\n\n        const propsOptions = {\n          zoom: this.props.zoom || this.props.defaultZoom,\n          center: new maps.LatLng(centerLatLng.lat, centerLatLng.lng),\n        };\n\n        // Start Heatmap\n        if (this.props.heatmap.positions) {\n          Object.assign(this, {\n            heatmap: generateHeatmap(maps, this.props.heatmap),\n          });\n          optionsHeatmap(this.heatmap, this.props.heatmap);\n        }\n        // End Heatmap\n\n        // prevent to exapose full api\n        // next props must be exposed (console.log(Object.keys(pick(maps, isPlainObject))))\n        // \"Animation\", \"ControlPosition\", \"MapTypeControlStyle\", \"MapTypeId\",\n        // \"NavigationControlStyle\", \"ScaleControlStyle\", \"StrokePosition\",\n        // \"SymbolPath\", \"ZoomControlStyle\",\n        // \"event\", \"DirectionsStatus\", \"DirectionsTravelMode\", \"DirectionsUnitSystem\",\n        // \"DistanceMatrixStatus\",\n        // \"DistanceMatrixElementStatus\", \"ElevationStatus\", \"GeocoderLocationType\",\n        // \"GeocoderStatus\", \"KmlLayerStatus\",\n        // \"MaxZoomStatus\", \"StreetViewStatus\", \"TransitMode\", \"TransitRoutePreference\",\n        // \"TravelMode\", \"UnitSystem\"\n        const mapPlainObjects = pick(maps, isPlainObject);\n        const options =\n          typeof this.props.options === 'function'\n            ? this.props.options(mapPlainObjects)\n            : this.props.options;\n        const defaultOptions = defaultOptions_(mapPlainObjects);\n\n        const draggableOptions = !isEmpty(this.props.draggable) && {\n          draggable: this.props.draggable,\n        };\n\n        const minZoom = this._computeMinZoom(options.minZoom);\n        this.minZoom_ = minZoom;\n\n        const preMapOptions = {\n          ...defaultOptions,\n          minZoom,\n          ...options,\n          ...propsOptions,\n        };\n\n        this.defaultDraggableOption_ = !isEmpty(preMapOptions.draggable)\n          ? preMapOptions.draggable\n          : this.defaultDraggableOption_;\n\n        const mapOptions = {\n          ...preMapOptions,\n          ...draggableOptions,\n        };\n\n        mapOptions.minZoom = _checkMinZoom(mapOptions.minZoom, minZoom);\n\n        const map = new maps.Map(\n          ReactDOM.findDOMNode(this.googleMapDom_),\n          mapOptions\n        );\n\n        this.map_ = map;\n        this.maps_ = maps;\n\n        this._setLayers(this.props.layerTypes);\n\n        // Parse `google.maps.version` to capture the major version number.\n        const versionMatch = maps.version.match(/^3\\.(\\d+)\\./);\n        // The major version is the first (and only) captured group.\n        const mapsVersion = versionMatch && Number(versionMatch[1]);\n\n        // render in overlay\n        const this_ = this;\n        const overlay = Object.assign(new maps.OverlayView(), {\n          onAdd() {\n            const K_MAX_WIDTH =\n              typeof screen !== 'undefined' ? `${screen.width}px` : '2000px';\n            const K_MAX_HEIGHT =\n              typeof screen !== 'undefined' ? `${screen.height}px` : '2000px';\n\n            const div = document.createElement('div');\n            div.style.backgroundColor = 'transparent';\n            div.style.position = 'absolute';\n            div.style.left = '0px';\n            div.style.top = '0px';\n            div.style.width = K_MAX_WIDTH; // prevents some chrome draw defects\n            div.style.height = K_MAX_HEIGHT;\n\n            if (this_.props.overlayViewDivStyle) {\n              const { overlayViewDivStyle } = this_.props;\n              if (typeof overlayViewDivStyle === 'object') {\n                Object.keys(overlayViewDivStyle).forEach((property) => {\n                  div.style[property] = overlayViewDivStyle[property];\n                });\n              }\n            }\n\n            const panes = this.getPanes();\n            panes.overlayMouseTarget.appendChild(div);\n            this_.geoService_.setMapCanvasProjection(\n              maps,\n              overlay.getProjection()\n            );\n\n            if (!IS_REACT_16) {\n              createPortal(\n                this_,\n                this_._renderPortal(),\n                div,\n                // remove prerendered markers\n                () => this_.setState({ overlay: div })\n              );\n            } else {\n              this_.setState({ overlay: div });\n            }\n          },\n\n          onRemove() {\n            const renderedOverlay = this_.state.overlay;\n            if (renderedOverlay && !IS_REACT_16) {\n              ReactDOM.unmountComponentAtNode(renderedOverlay);\n            }\n            this_.setState({ overlay: null });\n          },\n\n          draw() {\n            this_.updateCounter_++;\n            this_._onBoundsChanged(map, maps, !this_.props.debounced);\n\n            if (!this_.googleApiLoadedCalled_) {\n              this_._onGoogleApiLoaded({ map, maps, ref: this_.googleMapDom_ });\n              this_.googleApiLoadedCalled_ = true;\n            }\n\n            if (this_.mouse_) {\n              const latLng = this_.geoService_.fromContainerPixelToLatLng(\n                this_.mouse_\n              );\n              this_.mouse_.lat = latLng.lat;\n              this_.mouse_.lng = latLng.lng;\n            }\n\n            this_._onChildMouseMove();\n\n            if (this_.markersDispatcher_) {\n              this_.markersDispatcher_.emit('kON_CHANGE');\n              if (this_.fireMouseEventOnIdle_) {\n                this_.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n              }\n            }\n          },\n        });\n\n        this.overlay_ = overlay;\n\n        overlay.setMap(map);\n        if (this.props.heatmap.positions) {\n          this.heatmap.setMap(map);\n        }\n\n        if (this.props.onTilesLoaded) {\n          maps.event.addListener(map, 'tilesloaded', () => {\n            this_._onTilesLoaded();\n          });\n        }\n\n        maps.event.addListener(map, 'zoom_changed', () => {\n          // recalc position at zoom start\n          if (this_.geoService_.getZoom() !== map.getZoom()) {\n            if (!this_.zoomAnimationInProgress_) {\n              this_.zoomAnimationInProgress_ = true;\n              this_._onZoomAnimationStart(map.zoom);\n            }\n\n            // If draw() is not called each frame during a zoom animation,\n            // simulate it.\n            if (mapsVersion < DRAW_CALLED_DURING_ANIMATION_VERSION) {\n              const TIMEOUT_ZOOM = 300;\n\n              if (\n                new Date().getTime() - this.zoomControlClickTime_ <\n                TIMEOUT_ZOOM\n              ) {\n                // there is strange Google Map Api behavior in chrome when zoom animation of map\n                // is started only on second raf call, if was click on zoom control\n                // or +- keys pressed, so i wait for two rafs before change state\n\n                // this does not fully prevent animation jump\n                // but reduce it's occurence probability\n                raf(() =>\n                  raf(() => {\n                    this_.updateCounter_++;\n                    this_._onBoundsChanged(map, maps);\n                  })\n                );\n              } else {\n                this_.updateCounter_++;\n                this_._onBoundsChanged(map, maps);\n              }\n            }\n          }\n        });\n\n        maps.event.addListener(map, 'idle', () => {\n          if (this.resetSizeOnIdle_) {\n            this._setViewSize();\n            const currMinZoom = this._computeMinZoom(options.minZoom);\n\n            if (currMinZoom !== this.minZoom_) {\n              this.minZoom_ = currMinZoom;\n              map.setOptions({ minZoom: currMinZoom });\n            }\n\n            this.resetSizeOnIdle_ = false;\n          }\n\n          if (this_.zoomAnimationInProgress_) {\n            this_.zoomAnimationInProgress_ = false;\n            this_._onZoomAnimationEnd(map.zoom);\n          }\n\n          this_.updateCounter_++;\n          this_._onBoundsChanged(map, maps);\n\n          this_.dragTime_ = 0;\n\n          if (this_.markersDispatcher_) {\n            this_.markersDispatcher_.emit('kON_CHANGE');\n          }\n        });\n\n        maps.event.addListener(map, 'mouseover', () => {\n          // has advantage over div MouseLeave\n          this_.mouseInMap_ = true;\n        });\n\n        // an alternative way to know the mouse is back within the map\n        // This would not fire when clicking/interacting with google maps\n        // own on-map countrols+markers. This handles an edge case for touch devices\n        // + 'draggable:false' custom option. See #332 for more details.\n        maps.event.addListener(map, 'click', () => {\n          this_.mouseInMap_ = true;\n        });\n\n        maps.event.addListener(map, 'mouseout', () => {\n          // has advantage over div MouseLeave\n          this_.mouseInMap_ = false;\n          this_.mouse_ = null;\n          this_.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n        });\n\n        maps.event.addListener(map, 'drag', () => {\n          this_.dragTime_ = new Date().getTime();\n          this_._onDrag(map);\n        });\n\n        maps.event.addListener(map, 'dragend', () => {\n          // 'dragend' fires on mouse release.\n          // 'idle' listener waits until drag inertia ends before firing `onDragEnd`\n          const idleListener = maps.event.addListener(map, 'idle', () => {\n            maps.event.removeListener(idleListener);\n            this_._onDragEnd(map);\n          });\n        });\n        // user choosing satellite vs roads, etc\n        maps.event.addListener(map, 'maptypeid_changed', () => {\n          this_._onMapTypeIdChange(map.getMapTypeId());\n        });\n      })\n      .catch((e) => {\n        // notify callback of load failure\n        this._onGoogleApiLoaded({\n          map: null,\n          maps: null,\n          ref: this.googleMapDom_,\n        });\n        console.error(e); // eslint-disable-line no-console\n        throw e;\n      });\n  };\n\n  _onGoogleApiLoaded = (...args) => {\n    if (this.props.onGoogleApiLoaded) {\n      if (\n        process.env.NODE_ENV !== 'production' &&\n        this.props.yesIWantToUseGoogleMapApiInternals !== true\n      ) {\n        console.warn(\n          'GoogleMap: ' + // eslint-disable-line\n            'Usage of internal api objects is dangerous ' +\n            'and can cause a lot of issues.\\n' +\n            'To hide this warning add yesIWantToUseGoogleMapApiInternals={true} ' +\n            'to <GoogleMap instance'\n        );\n      }\n\n      this.props.onGoogleApiLoaded(...args);\n    }\n  };\n\n  _getHoverDistance = () => this.props.hoverDistance;\n\n  _onDrag = (...args) => this.props.onDrag && this.props.onDrag(...args);\n\n  _onDragEnd = (...args) =>\n    this.props.onDragEnd && this.props.onDragEnd(...args);\n\n  _onMapTypeIdChange = (...args) =>\n    this.props.onMapTypeIdChange && this.props.onMapTypeIdChange(...args);\n\n  _onZoomAnimationStart = (...args) =>\n    this.props.onZoomAnimationStart && this.props.onZoomAnimationStart(...args);\n\n  _onZoomAnimationEnd = (...args) =>\n    this.props.onZoomAnimationEnd && this.props.onZoomAnimationEnd(...args);\n\n  _onTilesLoaded = () => this.props.onTilesLoaded && this.props.onTilesLoaded();\n\n  _onChildClick = (...args) => {\n    if (this.props.onChildClick) {\n      return this.props.onChildClick(...args);\n    }\n    return undefined;\n  };\n\n  _onChildMouseDown = (hoverKey, childProps) => {\n    this.childMouseDownArgs_ = [hoverKey, childProps];\n    if (this.props.onChildMouseDown) {\n      this.props.onChildMouseDown(hoverKey, childProps, { ...this.mouse_ });\n    }\n  };\n\n  // this method works only if this.props.onChildMouseDown was called\n  _onChildMouseUp = () => {\n    if (this.childMouseDownArgs_) {\n      if (this.props.onChildMouseUp) {\n        this.props.onChildMouseUp(...this.childMouseDownArgs_, {\n          ...this.mouse_,\n        });\n      }\n      this.childMouseDownArgs_ = null;\n      this.childMouseUpTime_ = new Date().getTime();\n    }\n  };\n\n  // this method works only if this.props.onChildMouseDown was called\n  _onChildMouseMove = () => {\n    if (this.childMouseDownArgs_) {\n      if (this.props.onChildMouseMove) {\n        this.props.onChildMouseMove(...this.childMouseDownArgs_, {\n          ...this.mouse_,\n        });\n      }\n    }\n  };\n\n  _onChildMouseEnter = (...args) => {\n    if (this.props.onChildMouseEnter) {\n      return this.props.onChildMouseEnter(...args);\n    }\n    return undefined;\n  };\n\n  _onChildMouseLeave = (...args) => {\n    if (this.props.onChildMouseLeave) {\n      return this.props.onChildMouseLeave(...args);\n    }\n    return undefined;\n  };\n\n  _setViewSize = () => {\n    if (!this.mounted_) return;\n    if (isFullScreen()) {\n      this.geoService_.setViewSize(window.innerWidth, window.innerHeight);\n    } else {\n      const mapDom = ReactDOM.findDOMNode(this.googleMapDom_);\n      this.geoService_.setViewSize(mapDom.clientWidth, mapDom.clientHeight);\n    }\n    this._onBoundsChanged();\n  };\n\n  _onWindowResize = () => {\n    this.resetSizeOnIdle_ = true;\n  };\n\n  _onMapMouseMove = (e) => {\n    if (!this.mouseInMap_) return;\n\n    const currTime = new Date().getTime();\n    const K_RECALC_CLIENT_RECT_MS = 50;\n\n    if (currTime - this.mouseMoveTime_ > K_RECALC_CLIENT_RECT_MS) {\n      this.boundingRect_ = e.currentTarget.getBoundingClientRect();\n    }\n    this.mouseMoveTime_ = currTime;\n\n    const mousePosX = e.clientX - this.boundingRect_.left;\n    const mousePosY = e.clientY - this.boundingRect_.top;\n\n    if (!this.mouse_) {\n      this.mouse_ = { x: 0, y: 0, lat: 0, lng: 0 };\n    }\n\n    this.mouse_.x = mousePosX;\n    this.mouse_.y = mousePosY;\n\n    const latLng = this.geoService_.fromContainerPixelToLatLng(this.mouse_);\n    this.mouse_.lat = latLng.lat;\n    this.mouse_.lng = latLng.lng;\n\n    this._onChildMouseMove();\n\n    if (currTime - this.dragTime_ < K_IDLE_TIMEOUT) {\n      this.fireMouseEventOnIdle_ = true;\n    } else {\n      this.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n      this.fireMouseEventOnIdle_ = false;\n    }\n  };\n\n  // K_IDLE_CLICK_TIMEOUT - looks like 300 is enough\n  _onClick = (...args) =>\n    this.props.onClick &&\n    !this.childMouseDownArgs_ &&\n    new Date().getTime() - this.childMouseUpTime_ > K_IDLE_CLICK_TIMEOUT &&\n    this.dragTime_ === 0 &&\n    this.props.onClick(...args);\n\n  _onMapClick = (event) => {\n    if (this.markersDispatcher_) {\n      // support touch events and recalculate mouse position on click\n      this._onMapMouseMove(event);\n      const currTime = new Date().getTime();\n      if (currTime - this.dragTime_ > K_IDLE_TIMEOUT) {\n        if (this.mouse_) {\n          this._onClick({\n            ...this.mouse_,\n            event,\n          });\n        }\n\n        this.markersDispatcher_.emit('kON_CLICK', event);\n      }\n    }\n  };\n\n  // gmap can't prevent map drag if mousedown event already occured\n  // the only workaround I find is prevent mousedown native browser event\n  _onMapMouseDownNative = (event) => {\n    if (!this.mouseInMap_) return;\n\n    this._onMapMouseDown(event);\n  };\n\n  _onMapMouseDown = (event) => {\n    if (this.markersDispatcher_) {\n      const currTime = new Date().getTime();\n      if (currTime - this.dragTime_ > K_IDLE_TIMEOUT) {\n        // Hovered marker detected at mouse move could be deleted at mouse down time\n        // so it will be good to force hovered marker recalculation\n        this._onMapMouseMove(event);\n        this.markersDispatcher_.emit('kON_MDOWN', event);\n      }\n    }\n  };\n\n  _onMapMouseDownCapture = () => {\n    if (detectBrowser().isChrome) {\n      // to fix strange zoom in chrome\n      this.zoomControlClickTime_ = new Date().getTime();\n    }\n  };\n\n  _onKeyDownCapture = () => {\n    if (detectBrowser().isChrome) {\n      this.zoomControlClickTime_ = new Date().getTime();\n    }\n  };\n\n  _isCenterDefined = (center) =>\n    center &&\n    ((isPlainObject(center) && isNumber(center.lat) && isNumber(center.lng)) ||\n      (center.length === 2 && isNumber(center[0]) && isNumber(center[1])));\n\n  _onBoundsChanged = (map, maps, callExtBoundsChange) => {\n    if (map) {\n      const gmC = map.getCenter();\n      this.geoService_.setView([gmC.lat(), gmC.lng()], map.getZoom(), 0);\n    }\n\n    if (\n      (this.props.onChange || this.props.onBoundsChange) &&\n      this.geoService_.canProject()\n    ) {\n      const zoom = this.geoService_.getZoom();\n      const bounds = this.geoService_.getBounds();\n      const centerLatLng = this.geoService_.getCenter();\n\n      if (!isArraysEqualEps(bounds, this.prevBounds_, kEPS)) {\n        if (callExtBoundsChange !== false) {\n          const marginBounds = this.geoService_.getBounds(this.props.margin);\n          if (this.props.onBoundsChange) {\n            this.props.onBoundsChange(\n              this.centerIsObject_\n                ? { ...centerLatLng }\n                : [centerLatLng.lat, centerLatLng.lng],\n              zoom,\n              bounds,\n              marginBounds\n            );\n          }\n\n          if (this.props.onChange) {\n            this.props.onChange({\n              center: { ...centerLatLng },\n              zoom,\n              bounds: {\n                nw: {\n                  lat: bounds[0],\n                  lng: bounds[1],\n                },\n                se: {\n                  lat: bounds[2],\n                  lng: bounds[3],\n                },\n                sw: {\n                  lat: bounds[4],\n                  lng: bounds[5],\n                },\n                ne: {\n                  lat: bounds[6],\n                  lng: bounds[7],\n                },\n              },\n              marginBounds: {\n                nw: {\n                  lat: marginBounds[0],\n                  lng: marginBounds[1],\n                },\n                se: {\n                  lat: marginBounds[2],\n                  lng: marginBounds[3],\n                },\n                sw: {\n                  lat: marginBounds[4],\n                  lng: marginBounds[5],\n                },\n                ne: {\n                  lat: marginBounds[6],\n                  lng: marginBounds[7],\n                },\n              },\n\n              size: this.geoService_.hasSize()\n                ? {\n                    width: this.geoService_.getWidth(),\n                    height: this.geoService_.getHeight(),\n                  }\n                : {\n                    width: 0,\n                    height: 0,\n                  },\n            });\n          }\n\n          this.prevBounds_ = bounds;\n        }\n      }\n    }\n  };\n\n  _registerChild = (ref) => {\n    this.googleMapDom_ = ref;\n  };\n\n  render() {\n    const overlay = this.state.overlay;\n    const mapMarkerPrerender = !overlay ? (\n      <GoogleMapMarkersPrerender\n        experimental={this.props.experimental}\n        onChildClick={this._onChildClick}\n        onChildMouseDown={this._onChildMouseDown}\n        onChildMouseEnter={this._onChildMouseEnter}\n        onChildMouseLeave={this._onChildMouseLeave}\n        geoService={this.geoService_}\n        insideMapPanes={false}\n        distanceToMouse={this.props.distanceToMouse}\n        getHoverDistance={this._getHoverDistance}\n        dispatcher={this.markersDispatcher_}\n      />\n    ) : null;\n\n    return (\n      <div\n        style={this.props.style}\n        onMouseMove={this._onMapMouseMove}\n        onMouseDownCapture={this._onMapMouseDownCapture}\n        onClick={this._onMapClick}\n      >\n        <GoogleMapMap registerChild={this._registerChild} />\n        {IS_REACT_16 && overlay && createPortal(this._renderPortal(), overlay)}\n\n        {/* render markers before map load done */}\n        {mapMarkerPrerender}\n      </div>\n    );\n  }\n}\n\nexport default GoogleMap;\n","export const generateHeatmap = (instance, { positions }) =>\n  new instance.visualization.HeatmapLayer({\n    data: positions.reduce((acc, { lat, lng, weight = 1 }) => {\n      acc.push({\n        location: new instance.LatLng(lat, lng),\n        weight,\n      });\n      return acc;\n    }, []),\n  });\n\nexport const optionsHeatmap = (instance, { options = {} }) =>\n  Object.keys(options).map((option) => instance.set(option, options[option]));\n","export default function isArraysEqualEps(arrayA, arrayB, eps) {\n  if (arrayA && arrayB) {\n    for (let i = 0; i !== arrayA.length; ++i) {\n      if (Math.abs(arrayA[i] - arrayB[i]) > eps) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n"],"sourceRoot":""}